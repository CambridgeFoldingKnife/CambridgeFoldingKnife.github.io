import{_ as i,c as o,d as c,e as s,f as a,b as e,w as u,r as t,o as r}from"./app-D9dfRPMK.js";const d={},k={href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/memory-management-0000001820880781-V5",target:"_blank",rel:"noopener noreferrer"},v={href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/battery-optimization-0000001774280838-V5",target:"_blank",rel:"noopener noreferrer"};function m(b,n){const p=t("ExternalLinkIcon"),l=t("RouteLink");return r(),o("div",null,[n[5]||(n[5]=c(`<h1 id="å†…å­˜ä¸ç”µé‡ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#å†…å­˜ä¸ç”µé‡ä¼˜åŒ–"><span>å†…å­˜ä¸ç”µé‡ä¼˜åŒ–</span></a></h1><blockquote><p>ä¼˜åŒ–å†…å­˜å’Œç”µé‡ä½¿ç”¨</p></blockquote><h2 id="ğŸ’¾-å†…å­˜ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#ğŸ’¾-å†…å­˜ç®¡ç†"><span>ğŸ’¾ å†…å­˜ç®¡ç†</span></a></h2><h3 id="åŠæ—¶é‡Šæ”¾èµ„æº" tabindex="-1"><a class="header-anchor" href="#åŠæ—¶é‡Šæ”¾èµ„æº"><span>åŠæ—¶é‡Šæ”¾èµ„æº</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span></span>
<span class="line">struct MemoryOptimized <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> player<span class="token operator">:</span> AVPlayer <span class="token operator">|</span> <span class="token keyword">undefined</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">aboutToDisappear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// âœ… é‡Šæ”¾èµ„æº</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>player <span class="token operator">=</span> <span class="token keyword">undefined</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é¿å…å†…å­˜æ³„æ¼" tabindex="-1"><a class="header-anchor" href="#é¿å…å†…å­˜æ³„æ¼"><span>é¿å…å†…å­˜æ³„æ¼</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// âœ… å–æ¶ˆå®šæ—¶å™¨</span></span>
<span class="line"><span class="token function">aboutToDisappear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timerId <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timerId<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// âœ… ç§»é™¤ç›‘å¬å™¨</span></span>
<span class="line"><span class="token function">aboutToDisappear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  eventBus<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;event&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handler<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”‹-ç”µé‡ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#ğŸ”‹-ç”µé‡ä¼˜åŒ–"><span>ğŸ”‹ ç”µé‡ä¼˜åŒ–</span></a></h2><h3 id="åå°ä»»åŠ¡ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#åå°ä»»åŠ¡ç®¡ç†"><span>åå°ä»»åŠ¡ç®¡ç†</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> backgroundTaskManager <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@kit.BackgroundTasksKit&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ç”³è¯·åå°ä»»åŠ¡</span></span>
<span class="line">backgroundTaskManager<span class="token punctuation">.</span><span class="token function">requestBackgroundRunning</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  bgMode<span class="token operator">:</span> backgroundTaskManager<span class="token punctuation">.</span>BackgroundMode<span class="token punctuation">.</span><span class="token constant">DATA_TRANSFER</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;åå°ä»»åŠ¡å·²å¯åŠ¨&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åœæ­¢åå°ä»»åŠ¡</span></span>
<span class="line">backgroundTaskManager<span class="token punctuation">.</span><span class="token function">stopBackgroundRunning</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ™ºèƒ½æ›´æ–°ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#æ™ºèƒ½æ›´æ–°ç­–ç•¥"><span>æ™ºèƒ½æ›´æ–°ç­–ç•¥</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">SmartUpdateManager</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">shouldUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// æ£€æŸ¥ç”µé‡</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>batteryLevel <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// æ£€æŸ¥ç½‘ç»œ</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>isOnMobileData<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“š-å‚è€ƒèµ„æº" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-å‚è€ƒèµ„æº"><span>ğŸ“š å‚è€ƒèµ„æº</span></a></h2>`,13)),s("ul",null,[s("li",null,[s("a",k,[n[0]||(n[0]=a("å†…å­˜ç®¡ç†",-1)),e(p)])]),s("li",null,[s("a",v,[n[1]||(n[1]=a("ç”µé‡ä¼˜åŒ–",-1)),e(p)])])]),n[6]||(n[6]=s("hr",null,null,-1)),s("p",null,[n[3]||(n[3]=s("strong",null,"ç¬¬15ç« å®Œæˆï¼",-1)),n[4]||(n[4]=a(" ç»§ç»­å­¦ä¹  â†’ ",-1)),e(l,{to:"/tutorials/harmonyos-dev/16-testing-devops/"},{default:u(()=>[...n[2]||(n[2]=[a("ç¬¬16ç« ï¼šæµ‹è¯•ä¸DevOps",-1)])]),_:1})])])}const g=i(d,[["render",m]]),y=JSON.parse('{"path":"/tutorials/harmonyos-dev/15-performance-optimization/03-nacunyudianliangyouhua.html","title":"å†…å­˜ä¸ç”µé‡ä¼˜åŒ–","lang":"zh-CN","frontmatter":{"title":"å†…å­˜ä¸ç”µé‡ä¼˜åŒ–","date":"2025-01-22T00:00:00.000Z"},"headers":[{"level":2,"title":"ğŸ’¾ å†…å­˜ç®¡ç†","slug":"ğŸ’¾-å†…å­˜ç®¡ç†","link":"#ğŸ’¾-å†…å­˜ç®¡ç†","children":[{"level":3,"title":"åŠæ—¶é‡Šæ”¾èµ„æº","slug":"åŠæ—¶é‡Šæ”¾èµ„æº","link":"#åŠæ—¶é‡Šæ”¾èµ„æº","children":[]},{"level":3,"title":"é¿å…å†…å­˜æ³„æ¼","slug":"é¿å…å†…å­˜æ³„æ¼","link":"#é¿å…å†…å­˜æ³„æ¼","children":[]}]},{"level":2,"title":"ğŸ”‹ ç”µé‡ä¼˜åŒ–","slug":"ğŸ”‹-ç”µé‡ä¼˜åŒ–","link":"#ğŸ”‹-ç”µé‡ä¼˜åŒ–","children":[{"level":3,"title":"åå°ä»»åŠ¡ç®¡ç†","slug":"åå°ä»»åŠ¡ç®¡ç†","link":"#åå°ä»»åŠ¡ç®¡ç†","children":[]},{"level":3,"title":"æ™ºèƒ½æ›´æ–°ç­–ç•¥","slug":"æ™ºèƒ½æ›´æ–°ç­–ç•¥","link":"#æ™ºèƒ½æ›´æ–°ç­–ç•¥","children":[]}]},{"level":2,"title":"ğŸ“š å‚è€ƒèµ„æº","slug":"ğŸ“š-å‚è€ƒèµ„æº","link":"#ğŸ“š-å‚è€ƒèµ„æº","children":[]}],"git":{"createdTime":1765250065000,"updatedTime":1765250065000,"contributors":[{"name":"CambridgeFoldingKnife","email":"3144253125@qq.com","commits":1}]},"filePathRelative":"tutorials/harmonyos-dev/15-performance-optimization/03-å†…å­˜ä¸ç”µé‡ä¼˜åŒ–.md"}');export{g as comp,y as data};
