import{_ as s,c as a,d as e,o as l}from"./app-DyGs7pMe.js";const t={};function p(i,n){return l(),a("div",null,[...n[0]||(n[0]=[e(`<h1 id="nacos注册配置中心" tabindex="-1"><a class="header-anchor" href="#nacos注册配置中心"><span>Nacos注册配置中心</span></a></h1><h2 id="一、nacos简介" tabindex="-1"><a class="header-anchor" href="#一、nacos简介"><span>一、Nacos简介</span></a></h2><h3 id="_1-1-什么是nacos" tabindex="-1"><a class="header-anchor" href="#_1-1-什么是nacos"><span>1.1 什么是Nacos？</span></a></h3><p><strong>Nacos</strong>（Dynamic Naming and Configuration Service）是阿里巴巴开源的服务注册与配置中心。</p><p><strong>功能：</strong></p><ul><li>服务注册与发现</li><li>配置管理</li><li>服务健康检查</li></ul><p><strong>官网：</strong> https://nacos.io/</p><h3 id="_1-2-nacos-vs-eureka" tabindex="-1"><a class="header-anchor" href="#_1-2-nacos-vs-eureka"><span>1.2 Nacos vs Eureka</span></a></h3><table><thead><tr><th>特性</th><th>Eureka</th><th>Nacos</th></tr></thead><tbody><tr><td><strong>功能</strong></td><td>注册中心</td><td>注册 + 配置</td></tr><tr><td><strong>CAP</strong></td><td>AP</td><td>AP + CP</td></tr><tr><td><strong>维护</strong></td><td>停更</td><td>活跃</td></tr><tr><td><strong>推荐</strong></td><td>★★★</td><td>★★★★★</td></tr></tbody></table><hr><h2 id="二、安装nacos" tabindex="-1"><a class="header-anchor" href="#二、安装nacos"><span>二、安装Nacos</span></a></h2><h3 id="_2-1-下载" tabindex="-1"><a class="header-anchor" href="#_2-1-下载"><span>2.1 下载</span></a></h3><p>访问：https://github.com/alibaba/nacos/releases</p><h3 id="_2-2-启动" tabindex="-1"><a class="header-anchor" href="#_2-2-启动"><span>2.2 启动</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Windows</span></span>
<span class="line">startup.cmd <span class="token parameter variable">-m</span> standalone</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Linux/Mac</span></span>
<span class="line"><span class="token function">sh</span> startup.sh <span class="token parameter variable">-m</span> standalone</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-访问控制台" tabindex="-1"><a class="header-anchor" href="#_2-3-访问控制台"><span>2.3 访问控制台</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">URL: http://localhost:8848/nacos</span>
<span class="line">用户名: nacos</span>
<span class="line">密码: nacos</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="三、服务注册" tabindex="-1"><a class="header-anchor" href="#三、服务注册"><span>三、服务注册</span></a></h2><h3 id="_3-1-添加依赖" tabindex="-1"><a class="header-anchor" href="#_3-1-添加依赖"><span>3.1 添加依赖</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2021.0.5.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-配置文件" tabindex="-1"><a class="header-anchor" href="#_3-2-配置文件"><span>3.2 配置文件</span></a></h3><p><strong>application.yml：</strong></p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">application</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> user<span class="token punctuation">-</span>service</span>
<span class="line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">nacos</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">discovery</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span></span>
<span class="line">        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> public  <span class="token comment"># 命名空间</span></span>
<span class="line">        <span class="token key atrule">group</span><span class="token punctuation">:</span> DEFAULT_GROUP  <span class="token comment"># 分组</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-启动类" tabindex="-1"><a class="header-anchor" href="#_3-3-启动类"><span>3.3 启动类</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@SpringBootApplication</span></span>
<span class="line"><span class="token annotation punctuation">@EnableDiscoveryClient</span>  <span class="token comment">// 启用服务发现</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceApplication</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">UserServiceApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="四、配置管理" tabindex="-1"><a class="header-anchor" href="#四、配置管理"><span>四、配置管理</span></a></h2><h3 id="_4-1-添加依赖" tabindex="-1"><a class="header-anchor" href="#_4-1-添加依赖"><span>4.1 添加依赖</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2021.0.5.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-配置文件" tabindex="-1"><a class="header-anchor" href="#_4-2-配置文件"><span>4.2 配置文件</span></a></h3><p><strong>bootstrap.yml：</strong></p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">application</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> user<span class="token punctuation">-</span>service</span>
<span class="line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">nacos</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">config</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span></span>
<span class="line">        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yaml</span>
<span class="line">        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> public</span>
<span class="line">        <span class="token key atrule">group</span><span class="token punctuation">:</span> DEFAULT_GROUP</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-nacos控制台配置" tabindex="-1"><a class="header-anchor" href="#_4-3-nacos控制台配置"><span>4.3 Nacos控制台配置</span></a></h3><p><strong>Data ID：</strong> user-service.yaml</p><p><strong>配置内容：</strong></p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">config</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">info</span><span class="token punctuation">:</span> <span class="token string">&quot;Hello Nacos Config&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-使用配置" tabindex="-1"><a class="header-anchor" href="#_4-4-使用配置"><span>4.4 使用配置</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@RestController</span></span>
<span class="line"><span class="token annotation punctuation">@RefreshScope</span>  <span class="token comment">// 动态刷新</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigController</span> <span class="token punctuation">{</span></span>
<span class="line">    </span>
<span class="line">    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${config.info}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> configInfo<span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/config&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> configInfo<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="五、命名空间" tabindex="-1"><a class="header-anchor" href="#五、命名空间"><span>五、命名空间</span></a></h2><h3 id="_5-1-创建命名空间" tabindex="-1"><a class="header-anchor" href="#_5-1-创建命名空间"><span>5.1 创建命名空间</span></a></h3><p>在 Nacos 控制台创建命名空间：</p><ul><li>开发环境（dev）</li><li>测试环境（test）</li><li>生产环境（prod）</li></ul><h3 id="_5-2-配置使用" tabindex="-1"><a class="header-anchor" href="#_5-2-配置使用"><span>5.2 配置使用</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">nacos</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">discovery</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> dev  <span class="token comment"># 使用dev命名空间</span></span>
<span class="line">      <span class="token key atrule">config</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="六、配置共享" tabindex="-1"><a class="header-anchor" href="#六、配置共享"><span>六、配置共享</span></a></h2><h3 id="_6-1-shared-configs" tabindex="-1"><a class="header-anchor" href="#_6-1-shared-configs"><span>6.1 shared-configs</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">nacos</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">config</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">shared-configs</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token punctuation">-</span> <span class="token key atrule">data-id</span><span class="token punctuation">:</span> common.yaml</span>
<span class="line">            <span class="token key atrule">group</span><span class="token punctuation">:</span> DEFAULT_GROUP</span>
<span class="line">            <span class="token key atrule">refresh</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-extension-configs" tabindex="-1"><a class="header-anchor" href="#_6-2-extension-configs"><span>6.2 extension-configs</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">nacos</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">config</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">extension-configs</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token punctuation">-</span> <span class="token key atrule">data-id</span><span class="token punctuation">:</span> redis.yaml</span>
<span class="line">            <span class="token key atrule">group</span><span class="token punctuation">:</span> DEFAULT_GROUP</span>
<span class="line">            <span class="token key atrule">refresh</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="七、总结" tabindex="-1"><a class="header-anchor" href="#七、总结"><span>七、总结</span></a></h2><p>✅ <strong>本章学习内容：</strong></p><ul><li>Nacos 简介</li><li>安装启动</li><li>服务注册发现</li><li>配置管理</li><li>命名空间</li><li>配置共享</li></ul><p>✅ <strong>核心要点：</strong></p><ul><li>Nacos 功能更强大</li><li>支持注册和配置</li><li>推荐使用 Nacos</li></ul><p><strong>下一章预告：</strong> 我们将学习 Sentinel 熔断限流。</p>`,59)])])}const o=s(t,[["render",p]]),r=JSON.parse('{"path":"/tutorials/java-backend/springcloud/7.Nacoszhucepeizhizhongxin.html","title":"Nacos注册配置中心","lang":"zh-CN","frontmatter":{"title":"Nacos注册配置中心"},"headers":[{"level":2,"title":"一、Nacos简介","slug":"一、nacos简介","link":"#一、nacos简介","children":[{"level":3,"title":"1.1 什么是Nacos？","slug":"_1-1-什么是nacos","link":"#_1-1-什么是nacos","children":[]},{"level":3,"title":"1.2 Nacos vs Eureka","slug":"_1-2-nacos-vs-eureka","link":"#_1-2-nacos-vs-eureka","children":[]}]},{"level":2,"title":"二、安装Nacos","slug":"二、安装nacos","link":"#二、安装nacos","children":[{"level":3,"title":"2.1 下载","slug":"_2-1-下载","link":"#_2-1-下载","children":[]},{"level":3,"title":"2.2 启动","slug":"_2-2-启动","link":"#_2-2-启动","children":[]},{"level":3,"title":"2.3 访问控制台","slug":"_2-3-访问控制台","link":"#_2-3-访问控制台","children":[]}]},{"level":2,"title":"三、服务注册","slug":"三、服务注册","link":"#三、服务注册","children":[{"level":3,"title":"3.1 添加依赖","slug":"_3-1-添加依赖","link":"#_3-1-添加依赖","children":[]},{"level":3,"title":"3.2 配置文件","slug":"_3-2-配置文件","link":"#_3-2-配置文件","children":[]},{"level":3,"title":"3.3 启动类","slug":"_3-3-启动类","link":"#_3-3-启动类","children":[]}]},{"level":2,"title":"四、配置管理","slug":"四、配置管理","link":"#四、配置管理","children":[{"level":3,"title":"4.1 添加依赖","slug":"_4-1-添加依赖","link":"#_4-1-添加依赖","children":[]},{"level":3,"title":"4.2 配置文件","slug":"_4-2-配置文件","link":"#_4-2-配置文件","children":[]},{"level":3,"title":"4.3 Nacos控制台配置","slug":"_4-3-nacos控制台配置","link":"#_4-3-nacos控制台配置","children":[]},{"level":3,"title":"4.4 使用配置","slug":"_4-4-使用配置","link":"#_4-4-使用配置","children":[]}]},{"level":2,"title":"五、命名空间","slug":"五、命名空间","link":"#五、命名空间","children":[{"level":3,"title":"5.1 创建命名空间","slug":"_5-1-创建命名空间","link":"#_5-1-创建命名空间","children":[]},{"level":3,"title":"5.2 配置使用","slug":"_5-2-配置使用","link":"#_5-2-配置使用","children":[]}]},{"level":2,"title":"六、配置共享","slug":"六、配置共享","link":"#六、配置共享","children":[{"level":3,"title":"6.1 shared-configs","slug":"_6-1-shared-configs","link":"#_6-1-shared-configs","children":[]},{"level":3,"title":"6.2 extension-configs","slug":"_6-2-extension-configs","link":"#_6-2-extension-configs","children":[]}]},{"level":2,"title":"七、总结","slug":"七、总结","link":"#七、总结","children":[]}],"git":{"createdTime":1765249786000,"updatedTime":1765249786000,"contributors":[{"name":"CambridgeFoldingKnife","email":"3144253125@qq.com","commits":1}]},"filePathRelative":"tutorials/java-backend/springcloud/7.Nacos注册配置中心.md"}');export{o as comp,r as data};
