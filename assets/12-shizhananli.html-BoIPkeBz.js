import{_ as s,c as a,d as p,o as t}from"./app-D9dfRPMK.js";const e={};function c(o,n){return t(),a("div",null,[...n[0]||(n[0]=[p(`<h1 id="å®æˆ˜æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#å®æˆ˜æ¡ˆä¾‹"><span>å®æˆ˜æ¡ˆä¾‹</span></a></h1><blockquote><p>é€šè¿‡å®æˆ˜é¡¹ç›®æŒæ¡è®¡ç®—æœºè§†è§‰</p></blockquote><h2 id="ğŸ“š-å­¦ä¹ ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-å­¦ä¹ ç›®æ ‡"><span>ğŸ“š å­¦ä¹ ç›®æ ‡</span></a></h2><ul><li>åº”ç”¨CVè§£å†³å®é™…é—®é¢˜</li><li>æŒæ¡å®Œæ•´é¡¹ç›®æµç¨‹</li><li>å­¦ä¼šç»¼åˆè¿ç”¨æŠ€æœ¯</li></ul><h2 id="_1-äººè„¸è¯†åˆ«ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#_1-äººè„¸è¯†åˆ«ç³»ç»Ÿ"><span>1. äººè„¸è¯†åˆ«ç³»ç»Ÿ</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> cv2</span>
<span class="line"><span class="token keyword">import</span> face_recognition</span>
<span class="line"></span>
<span class="line"><span class="token comment"># åŠ è½½å·²çŸ¥äººè„¸</span></span>
<span class="line">known_image <span class="token operator">=</span> face_recognition<span class="token punctuation">.</span>load_image_file<span class="token punctuation">(</span><span class="token string">&quot;person.jpg&quot;</span><span class="token punctuation">)</span></span>
<span class="line">known_encoding <span class="token operator">=</span> face_recognition<span class="token punctuation">.</span>face_encodings<span class="token punctuation">(</span>known_image<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å®æ—¶è¯†åˆ«</span></span>
<span class="line">cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span></span>
<span class="line">    ret<span class="token punctuation">,</span> frame <span class="token operator">=</span> cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    rgb_frame <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment"># æ£€æµ‹å’Œè¯†åˆ«</span></span>
<span class="line">    face_locations <span class="token operator">=</span> face_recognition<span class="token punctuation">.</span>face_locations<span class="token punctuation">(</span>rgb_frame<span class="token punctuation">)</span></span>
<span class="line">    face_encodings <span class="token operator">=</span> face_recognition<span class="token punctuation">.</span>face_encodings<span class="token punctuation">(</span>rgb_frame<span class="token punctuation">,</span> face_locations<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span>top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> left<span class="token punctuation">)</span><span class="token punctuation">,</span> face_encoding <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>face_locations<span class="token punctuation">,</span> face_encodings<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        matches <span class="token operator">=</span> face_recognition<span class="token punctuation">.</span>compare_faces<span class="token punctuation">(</span><span class="token punctuation">[</span>known_encoding<span class="token punctuation">]</span><span class="token punctuation">,</span> face_encoding<span class="token punctuation">)</span></span>
<span class="line">        name <span class="token operator">=</span> <span class="token string">&quot;Known&quot;</span> <span class="token keyword">if</span> <span class="token boolean">True</span> <span class="token keyword">in</span> matches <span class="token keyword">else</span> <span class="token string">&quot;Unknown&quot;</span></span>
<span class="line">        </span>
<span class="line">        cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>right<span class="token punctuation">,</span> bottom<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">        cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token punctuation">(</span>left<span class="token punctuation">,</span> top <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">                   cv2<span class="token punctuation">.</span>FONT_HERSHEY_SIMPLEX<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">&#39;Face Recognition&#39;</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span> <span class="token operator">==</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">&#39;q&#39;</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">break</span></span>
<span class="line"></span>
<span class="line">cap<span class="token punctuation">.</span>release<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-è½¦ç‰Œè¯†åˆ«" tabindex="-1"><a class="header-anchor" href="#_2-è½¦ç‰Œè¯†åˆ«"><span>2. è½¦ç‰Œè¯†åˆ«</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> cv2</span>
<span class="line"><span class="token keyword">import</span> pytesseract</span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">detect_license_plate</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    gray <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span></span>
<span class="line">    edges <span class="token operator">=</span> cv2<span class="token punctuation">.</span>Canny<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">    contours<span class="token punctuation">,</span> _ <span class="token operator">=</span> cv2<span class="token punctuation">.</span>findContours<span class="token punctuation">(</span>edges<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>RETR_TREE<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">for</span> contour <span class="token keyword">in</span> contours<span class="token punctuation">:</span></span>
<span class="line">        peri <span class="token operator">=</span> cv2<span class="token punctuation">.</span>arcLength<span class="token punctuation">(</span>contour<span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">        approx <span class="token operator">=</span> cv2<span class="token punctuation">.</span>approxPolyDP<span class="token punctuation">(</span>contour<span class="token punctuation">,</span> <span class="token number">0.02</span> <span class="token operator">*</span> peri<span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>approx<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">:</span></span>
<span class="line">            x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h <span class="token operator">=</span> cv2<span class="token punctuation">.</span>boundingRect<span class="token punctuation">(</span>contour<span class="token punctuation">)</span></span>
<span class="line">            aspect_ratio <span class="token operator">=</span> w <span class="token operator">/</span> <span class="token builtin">float</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span></span>
<span class="line">            </span>
<span class="line">            <span class="token keyword">if</span> <span class="token number">2</span> <span class="token operator">&lt;=</span> aspect_ratio <span class="token operator">&lt;=</span> <span class="token number">4</span><span class="token punctuation">:</span></span>
<span class="line">                plate <span class="token operator">=</span> gray<span class="token punctuation">[</span>y<span class="token punctuation">:</span>y<span class="token operator">+</span>h<span class="token punctuation">,</span> x<span class="token punctuation">:</span>x<span class="token operator">+</span>w<span class="token punctuation">]</span></span>
<span class="line">                text <span class="token operator">=</span> pytesseract<span class="token punctuation">.</span>image_to_string<span class="token punctuation">(</span>plate<span class="token punctuation">,</span> config<span class="token operator">=</span><span class="token string">&#39;--psm 7&#39;</span><span class="token punctuation">)</span></span>
<span class="line">                </span>
<span class="line">                <span class="token keyword">if</span> text<span class="token punctuation">:</span></span>
<span class="line">                    cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token operator">+</span>w<span class="token punctuation">,</span> y<span class="token operator">+</span>h<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">                    cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>img<span class="token punctuation">,</span> text<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">                               cv2<span class="token punctuation">.</span>FONT_HERSHEY_SIMPLEX<span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> img</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-ç›®æ ‡è·Ÿè¸ª" tabindex="-1"><a class="header-anchor" href="#_3-ç›®æ ‡è·Ÿè¸ª"><span>3. ç›®æ ‡è·Ÿè¸ª</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line">tracker <span class="token operator">=</span> cv2<span class="token punctuation">.</span>TrackerKCF_create<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span><span class="token string">&#39;video.mp4&#39;</span><span class="token punctuation">)</span></span>
<span class="line">ret<span class="token punctuation">,</span> frame <span class="token operator">=</span> cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">bbox <span class="token operator">=</span> cv2<span class="token punctuation">.</span>selectROI<span class="token punctuation">(</span><span class="token string">&#39;Frame&#39;</span><span class="token punctuation">,</span> frame<span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line">tracker<span class="token punctuation">.</span>init<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> bbox<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span></span>
<span class="line">    ret<span class="token punctuation">,</span> frame <span class="token operator">=</span> cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">not</span> ret<span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">break</span></span>
<span class="line">    </span>
<span class="line">    success<span class="token punctuation">,</span> bbox <span class="token operator">=</span> tracker<span class="token punctuation">.</span>update<span class="token punctuation">(</span>frame<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">if</span> success<span class="token punctuation">:</span></span>
<span class="line">        x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token keyword">for</span> v <span class="token keyword">in</span> bbox<span class="token punctuation">]</span></span>
<span class="line">        cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token operator">+</span>w<span class="token punctuation">,</span> y<span class="token operator">+</span>h<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">&#39;Tracking&#39;</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span> <span class="token operator">==</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">&#39;q&#39;</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">break</span></span>
<span class="line"></span>
<span class="line">cap<span class="token punctuation">.</span>release<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ’¡-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ’¡-æ€»ç»“"><span>ğŸ’¡ æ€»ç»“</span></a></h2><p>é€šè¿‡è¿™äº›å®æˆ˜æ¡ˆä¾‹ï¼Œä½ åº”è¯¥æŒæ¡äº†ï¼š</p><ol><li><strong>å®Œæ•´CVé¡¹ç›®æµç¨‹</strong> - ä»éœ€æ±‚åˆ°å®ç°</li><li><strong>äººè„¸è¯†åˆ«</strong> - æ£€æµ‹å’Œè¯†åˆ«æŠ€æœ¯</li><li><strong>OCRåº”ç”¨</strong> - è½¦ç‰Œè¯†åˆ«</li><li><strong>ç›®æ ‡è·Ÿè¸ª</strong> - è§†é¢‘åˆ†æ</li><li><strong>ç»¼åˆåº”ç”¨</strong> - æ™ºèƒ½ç›‘æ§ç³»ç»Ÿ</li></ol><hr><p><strong>æ­å–œå®Œæˆ CV æ•™ç¨‹ï¼</strong> ğŸ‰</p>`,15)])])}const i=s(e,[["render",c]]),u=JSON.parse('{"path":"/tutorials/python-ai/cv/12-shizhananli.html","title":"å®æˆ˜æ¡ˆä¾‹","lang":"zh-CN","frontmatter":{"title":"å®æˆ˜æ¡ˆä¾‹"},"headers":[{"level":2,"title":"ğŸ“š å­¦ä¹ ç›®æ ‡","slug":"ğŸ“š-å­¦ä¹ ç›®æ ‡","link":"#ğŸ“š-å­¦ä¹ ç›®æ ‡","children":[]},{"level":2,"title":"1. äººè„¸è¯†åˆ«ç³»ç»Ÿ","slug":"_1-äººè„¸è¯†åˆ«ç³»ç»Ÿ","link":"#_1-äººè„¸è¯†åˆ«ç³»ç»Ÿ","children":[]},{"level":2,"title":"2. è½¦ç‰Œè¯†åˆ«","slug":"_2-è½¦ç‰Œè¯†åˆ«","link":"#_2-è½¦ç‰Œè¯†åˆ«","children":[]},{"level":2,"title":"3. ç›®æ ‡è·Ÿè¸ª","slug":"_3-ç›®æ ‡è·Ÿè¸ª","link":"#_3-ç›®æ ‡è·Ÿè¸ª","children":[]},{"level":2,"title":"ğŸ’¡ æ€»ç»“","slug":"ğŸ’¡-æ€»ç»“","link":"#ğŸ’¡-æ€»ç»“","children":[]}],"git":{"createdTime":1765249786000,"updatedTime":1765249786000,"contributors":[{"name":"CambridgeFoldingKnife","email":"3144253125@qq.com","commits":1}]},"filePathRelative":"tutorials/python-ai/cv/12-å®æˆ˜æ¡ˆä¾‹.md"}');export{i as comp,u as data};
