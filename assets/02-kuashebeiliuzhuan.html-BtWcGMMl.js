import{_ as o,c as i,d as c,e as s,f as a,b as p,w as u,r as t,o as r}from"./app-DyGs7pMe.js";const k={},d={href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/hop-cross-device-migration-0000001821000453-V5",target:"_blank",rel:"noopener noreferrer"};function v(m,n){const e=t("ExternalLinkIcon"),l=t("RouteLink");return r(),i("div",null,[n[4]||(n[4]=c(`<h1 id="è·¨è®¾å¤‡æµè½¬" tabindex="-1"><a class="header-anchor" href="#è·¨è®¾å¤‡æµè½¬"><span>è·¨è®¾å¤‡æµè½¬</span></a></h1><blockquote><p>å®ç°åº”ç”¨è·¨è®¾å¤‡æ— ç¼è¿ç§»</p></blockquote><h2 id="ğŸ”„-æµè½¬æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#ğŸ”„-æµè½¬æ¦‚è¿°"><span>ğŸ”„ æµè½¬æ¦‚è¿°</span></a></h2><h3 id="ä»€ä¹ˆæ˜¯æµè½¬" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯æµè½¬"><span>ä»€ä¹ˆæ˜¯æµè½¬</span></a></h3><p>åº”ç”¨ä»ä¸€ä¸ªè®¾å¤‡è¿ç§»åˆ°å¦ä¸€ä¸ªè®¾å¤‡ï¼Œä¿æŒçŠ¶æ€å’Œæ•°æ®çš„è¿ç»­æ€§ã€‚</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">æµè½¬åœºæ™¯</span>
<span class="line">â”œâ”€ æ‰‹æœº â†’ å¹³æ¿ï¼ˆçœ‹è§†é¢‘æ¢å¤§å±ï¼‰</span>
<span class="line">â”œâ”€ å¹³æ¿ â†’ æ‰‹æœºï¼ˆå¤–å‡ºç»§ç»­ä½¿ç”¨ï¼‰</span>
<span class="line">â”œâ”€ æ‰‹æœº â†’ PCï¼ˆåŠå…¬æ›´é«˜æ•ˆï¼‰</span>
<span class="line">â””â”€ PC â†’ æ‰‹æœºï¼ˆéšæ—¶éšåœ°ï¼‰</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ¯-uiability-è¿ç§»" tabindex="-1"><a class="header-anchor" href="#ğŸ¯-uiability-è¿ç§»"><span>ğŸ¯ UIAbility è¿ç§»</span></a></h2><h3 id="é…ç½®è¿ç§»èƒ½åŠ›" tabindex="-1"><a class="header-anchor" href="#é…ç½®è¿ç§»èƒ½åŠ›"><span>é…ç½®è¿ç§»èƒ½åŠ›</span></a></h3><div class="language-json5 line-numbers-mode" data-highlighter="prismjs" data-ext="json5" data-title="json5"><pre><code><span class="line"><span class="token comment">// module.json5</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;abilities&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MainAbility&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;continuable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// å¯ç”¨æµè½¬èƒ½åŠ›</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®ç°è¿ç§»æ¥å£" tabindex="-1"><a class="header-anchor" href="#å®ç°è¿ç§»æ¥å£"><span>å®ç°è¿ç§»æ¥å£</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> UIAbility <span class="token keyword">from</span> <span class="token string">&#39;@ohos.app.ability.UIAbility&#39;</span></span>
<span class="line"><span class="token keyword">import</span> AbilityConstant <span class="token keyword">from</span> <span class="token string">&#39;@ohos.app.ability.AbilityConstant&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MainAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// ä¿å­˜çŠ¶æ€ï¼ˆè¿ç§»å‰ï¼‰</span></span>
<span class="line">  <span class="token function">onContinue</span><span class="token punctuation">(</span>wantParam<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> Object<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å‡†å¤‡è¿ç§»&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ä¿å­˜åº”ç”¨çŠ¶æ€</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;currentPage&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;DetailPage&#39;</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;scrollPosition&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">120</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;videoProgress&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">58.5</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;formData&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      username<span class="token operator">:</span> <span class="token string">&#39;Alice&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      content<span class="token operator">:</span> <span class="token string">&#39;æœªå®Œæˆçš„è¾“å…¥&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// è¿”å›åŒæ„è¿ç§»</span></span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">AGREE</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// æ¢å¤çŠ¶æ€ï¼ˆè¿ç§»åï¼‰</span></span>
<span class="line">  <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>launchParam<span class="token punctuation">.</span>launchReason <span class="token operator">===</span> AbilityConstant<span class="token punctuation">.</span>LaunchReason<span class="token punctuation">.</span><span class="token constant">CONTINUATION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ä»å…¶ä»–è®¾å¤‡è¿ç§»è€Œæ¥&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token comment">// æ¢å¤çŠ¶æ€</span></span>
<span class="line">      <span class="token keyword">const</span> currentPage <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>currentPage</span>
<span class="line">      <span class="token keyword">const</span> scrollPosition <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>scrollPosition</span>
<span class="line">      <span class="token keyword">const</span> videoProgress <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>videoProgress</span>
<span class="line">      <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>formData <span class="token operator">||</span> <span class="token string">&#39;{}&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token comment">// åº”ç”¨çŠ¶æ€</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;currentPage&#39;</span><span class="token punctuation">,</span> currentPage<span class="token punctuation">)</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;scrollPosition&#39;</span><span class="token punctuation">,</span> scrollPosition<span class="token punctuation">)</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;videoProgress&#39;</span><span class="token punctuation">,</span> videoProgress<span class="token punctuation">)</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;formData&#39;</span><span class="token punctuation">,</span> formData<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“¦-æ•°æ®è¿ç§»" tabindex="-1"><a class="header-anchor" href="#ğŸ“¦-æ•°æ®è¿ç§»"><span>ğŸ“¦ æ•°æ®è¿ç§»</span></a></h2><h3 id="è¿ç§»ç”¨æˆ·æ•°æ®" tabindex="-1"><a class="header-anchor" href="#è¿ç§»ç”¨æˆ·æ•°æ®"><span>è¿ç§»ç”¨æˆ·æ•°æ®</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">VideoPlayerAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> player<span class="token operator">:</span> VideoPlayer</span>
<span class="line">  </span>
<span class="line">  <span class="token function">onContinue</span><span class="token punctuation">(</span>wantParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// è·å–å½“å‰æ’­æ”¾çŠ¶æ€</span></span>
<span class="line">    <span class="token keyword">const</span> currentTime <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">getCurrentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> duration <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">getDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> videoUrl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">getVideoUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ä¿å­˜åˆ°è¿ç§»å‚æ•°</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;videoUrl&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> videoUrl</span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;currentTime&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> currentTime</span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;duration&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> duration</span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;isPlaying&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">AGREE</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>launchParam<span class="token punctuation">.</span>launchReason <span class="token operator">===</span> AbilityConstant<span class="token punctuation">.</span>LaunchReason<span class="token punctuation">.</span><span class="token constant">CONTINUATION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// æ¢å¤æ’­æ”¾å™¨</span></span>
<span class="line">      <span class="token keyword">const</span> videoUrl <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>videoUrl</span>
<span class="line">      <span class="token keyword">const</span> currentTime <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>currentTime</span>
<span class="line">      </span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>videoUrl<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">seekTo</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>isPlaying<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è¿ç§»å¤§æ•°æ®" tabindex="-1"><a class="header-anchor" href="#è¿ç§»å¤§æ•°æ®"><span>è¿ç§»å¤§æ•°æ®</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> distributedKVStore <span class="token keyword">from</span> <span class="token string">&#39;@ohos.data.distributedKVStore&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">DataMigrationHelper</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> kvStore<span class="token operator">:</span> distributedKVStore<span class="token punctuation">.</span>SingleKVStore</span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> kvManager <span class="token operator">=</span> distributedKVStore<span class="token punctuation">.</span><span class="token function">createKVManager</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      context<span class="token operator">:</span> context<span class="token punctuation">,</span></span>
<span class="line">      bundleName<span class="token operator">:</span> <span class="token string">&#39;com.example.app&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>kvStore <span class="token operator">=</span> <span class="token keyword">await</span> kvManager<span class="token punctuation">.</span><span class="token function">getKVStore</span><span class="token punctuation">(</span><span class="token string">&#39;migrationStore&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      createIfMissing<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">      autoSync<span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// ä¿å­˜æ•°æ®åˆ°åˆ†å¸ƒå¼å­˜å‚¨</span></span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">saveForMigration</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token string">&#39;migration_data&#39;</span></span>
<span class="line">    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>kvStore<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// ä»åˆ†å¸ƒå¼å­˜å‚¨è¯»å–</span></span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">loadFromMigration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token string">&#39;migration_data&#39;</span></span>
<span class="line">    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>kvStore<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä½¿ç”¨</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">DocumentEditorAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> migrationHelper<span class="token operator">:</span> DataMigrationHelper</span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">onContinue</span><span class="token punctuation">(</span>wantParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ä¿å­˜å¤§é‡æ•°æ®åˆ°åˆ†å¸ƒå¼å­˜å‚¨</span></span>
<span class="line">    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>migrationHelper<span class="token punctuation">.</span><span class="token function">saveForMigration</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      document<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentDocument<span class="token punctuation">,</span></span>
<span class="line">      editHistory<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>editHistory<span class="token punctuation">,</span></span>
<span class="line">      cursorPosition<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cursorPosition</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// åªä¼ é€’æ•°æ®æ ‡è¯†</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;dataKey&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;migration_data&#39;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">AGREE</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>launchParam<span class="token punctuation">.</span>launchReason <span class="token operator">===</span> AbilityConstant<span class="token punctuation">.</span>LaunchReason<span class="token punctuation">.</span><span class="token constant">CONTINUATION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// ä»åˆ†å¸ƒå¼å­˜å‚¨æ¢å¤æ•°æ®</span></span>
<span class="line">      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>migrationHelper<span class="token punctuation">.</span><span class="token function">loadFromMigration</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>currentDocument <span class="token operator">=</span> data<span class="token punctuation">.</span>document</span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>editHistory <span class="token operator">=</span> data<span class="token punctuation">.</span>editHistory</span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>cursorPosition <span class="token operator">=</span> data<span class="token punctuation">.</span>cursorPosition</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ®-å®æˆ˜æ¡ˆä¾‹-è§†é¢‘æ’­æ”¾å™¨æµè½¬" tabindex="-1"><a class="header-anchor" href="#ğŸ®-å®æˆ˜æ¡ˆä¾‹-è§†é¢‘æ’­æ”¾å™¨æµè½¬"><span>ğŸ® å®æˆ˜æ¡ˆä¾‹ï¼šè§†é¢‘æ’­æ”¾å™¨æµè½¬</span></a></h2><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span></span>
<span class="line">struct VideoPlayer <span class="token punctuation">{</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">StorageLink</span></span><span class="token punctuation">(</span><span class="token string">&#39;videoUrl&#39;</span><span class="token punctuation">)</span> videoUrl<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&#39;&#39;</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">StorageLink</span></span><span class="token punctuation">(</span><span class="token string">&#39;currentTime&#39;</span><span class="token punctuation">)</span> currentTime<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">StorageLink</span></span><span class="token punctuation">(</span><span class="token string">&#39;isPlaying&#39;</span><span class="token punctuation">)</span> isPlaying<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">private</span> videoController<span class="token operator">:</span> VideoController <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VideoController</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">aboutToAppear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// å¦‚æœæ˜¯è¿ç§»è¿‡æ¥çš„ï¼Œæ¢å¤æ’­æ”¾çŠ¶æ€</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>videoUrl <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>videoController<span class="token punctuation">.</span><span class="token function">setCurrentTime</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPlaying<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>videoController<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">Video</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        src<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>videoUrl<span class="token punctuation">,</span></span>
<span class="line">        controller<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>videoController</span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">&#39;100%&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// å®æ—¶æ›´æ–°æ’­æ”¾è¿›åº¦</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">=</span> event<span class="token punctuation">.</span>time</span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">{</span> space<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">Button</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPlaying <span class="token operator">?</span> <span class="token string">&#39;æš‚åœ&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;æ’­æ”¾&#39;</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPlaying<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token keyword">this</span><span class="token punctuation">.</span>videoController<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token keyword">this</span><span class="token punctuation">.</span>videoController<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>isPlaying <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPlaying</span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">formatTime</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> top<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">formatTime</span><span class="token punctuation">(</span>seconds<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>seconds <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> sec <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>seconds <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>min<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>sec<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;0&#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Ability</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">VideoPlayerAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">onContinue</span><span class="token punctuation">(</span>wantParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// è·å–å½“å‰çŠ¶æ€</span></span>
<span class="line">    <span class="token keyword">const</span> videoUrl <span class="token operator">=</span> AppStorage<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&#39;videoUrl&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> currentTime <span class="token operator">=</span> AppStorage<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&#39;currentTime&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> isPlaying <span class="token operator">=</span> AppStorage<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&#39;isPlaying&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ä¿å­˜åˆ°è¿ç§»å‚æ•°</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;videoUrl&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> videoUrl</span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;currentTime&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> currentTime</span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;isPlaying&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> isPlaying</span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">AGREE</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>launchParam<span class="token punctuation">.</span>launchReason <span class="token operator">===</span> AbilityConstant<span class="token punctuation">.</span>LaunchReason<span class="token punctuation">.</span><span class="token constant">CONTINUATION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// æ¢å¤çŠ¶æ€</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;videoUrl&#39;</span><span class="token punctuation">,</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>videoUrl<span class="token punctuation">)</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;currentTime&#39;</span><span class="token punctuation">,</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>currentTime<span class="token punctuation">)</span></span>
<span class="line">      AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;isPlaying&#39;</span><span class="token punctuation">,</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>isPlaying<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ’¡-æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#ğŸ’¡-æœ€ä½³å®è·µ"><span>ğŸ’¡ æœ€ä½³å®è·µ</span></a></h2><h3 id="_1-åªè¿ç§»å¿…è¦æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_1-åªè¿ç§»å¿…è¦æ•°æ®"><span>1. åªè¿ç§»å¿…è¦æ•°æ®</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// âœ… åªä¿å­˜å…³é”®çŠ¶æ€</span></span>
<span class="line">wantParam<span class="token punctuation">[</span><span class="token string">&#39;videoId&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>videoId</span>
<span class="line">wantParam<span class="token punctuation">[</span><span class="token string">&#39;progress&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>progress</span>
<span class="line"></span>
<span class="line"><span class="token comment">// âŒ é¿å…ä¿å­˜å¤§æ•°æ®</span></span>
<span class="line"><span class="token comment">// wantParam[&#39;videoData&#39;] = this.videoBuffer  // å¤ªå¤§</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-ä½¿ç”¨åˆ†å¸ƒå¼å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#_2-ä½¿ç”¨åˆ†å¸ƒå¼å­˜å‚¨"><span>2. ä½¿ç”¨åˆ†å¸ƒå¼å­˜å‚¨</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// å¤§æ•°æ®æ”¾åˆ†å¸ƒå¼å­˜å‚¨</span></span>
<span class="line"><span class="token keyword">await</span> kvStore<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&#39;largeData&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åªä¼ é€’å¼•ç”¨</span></span>
<span class="line">wantParam<span class="token punctuation">[</span><span class="token string">&#39;dataKey&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;largeData&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-å¤„ç†è¿ç§»å¤±è´¥" tabindex="-1"><a class="header-anchor" href="#_3-å¤„ç†è¿ç§»å¤±è´¥"><span>3. å¤„ç†è¿ç§»å¤±è´¥</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token function">onContinue</span><span class="token punctuation">(</span>wantParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ä¿å­˜çŠ¶æ€</span></span>
<span class="line">    wantParam<span class="token punctuation">[</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">AGREE</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;è¿ç§»å‡†å¤‡å¤±è´¥:&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> AbilityConstant<span class="token punctuation">.</span>OnContinueResult<span class="token punctuation">.</span><span class="token constant">REJECT</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“š-å‚è€ƒèµ„æº" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-å‚è€ƒèµ„æº"><span>ğŸ“š å‚è€ƒèµ„æº</span></a></h2>`,26)),s("ul",null,[s("li",null,[s("a",d,[n[0]||(n[0]=a("è·¨ç«¯è¿ç§»",-1)),p(e)])])]),n[5]||(n[5]=s("hr",null,null,-1)),s("p",null,[n[2]||(n[2]=s("strong",null,"ä¸‹ä¸€èŠ‚",-1)),n[3]||(n[3]=a(" â†’ ",-1)),p(l,{to:"/tutorials/harmonyos-dev/10-distributed-next/03-%E5%88%86%E5%B8%83%E5%BC%8F%E7%BB%84%E4%BB%B6.html"},{default:u(()=>[...n[1]||(n[1]=[a("åˆ†å¸ƒå¼ç»„ä»¶",-1)])]),_:1})])])}const y=o(k,[["render",v]]),g=JSON.parse('{"path":"/tutorials/harmonyos-dev/10-distributed-next/02-kuashebeiliuzhuan.html","title":"è·¨è®¾å¤‡æµè½¬","lang":"zh-CN","frontmatter":{"title":"è·¨è®¾å¤‡æµè½¬","date":"2025-01-22T00:00:00.000Z"},"headers":[{"level":2,"title":"ğŸ”„ æµè½¬æ¦‚è¿°","slug":"ğŸ”„-æµè½¬æ¦‚è¿°","link":"#ğŸ”„-æµè½¬æ¦‚è¿°","children":[{"level":3,"title":"ä»€ä¹ˆæ˜¯æµè½¬","slug":"ä»€ä¹ˆæ˜¯æµè½¬","link":"#ä»€ä¹ˆæ˜¯æµè½¬","children":[]}]},{"level":2,"title":"ğŸ¯ UIAbility è¿ç§»","slug":"ğŸ¯-uiability-è¿ç§»","link":"#ğŸ¯-uiability-è¿ç§»","children":[{"level":3,"title":"é…ç½®è¿ç§»èƒ½åŠ›","slug":"é…ç½®è¿ç§»èƒ½åŠ›","link":"#é…ç½®è¿ç§»èƒ½åŠ›","children":[]},{"level":3,"title":"å®ç°è¿ç§»æ¥å£","slug":"å®ç°è¿ç§»æ¥å£","link":"#å®ç°è¿ç§»æ¥å£","children":[]}]},{"level":2,"title":"ğŸ“¦ æ•°æ®è¿ç§»","slug":"ğŸ“¦-æ•°æ®è¿ç§»","link":"#ğŸ“¦-æ•°æ®è¿ç§»","children":[{"level":3,"title":"è¿ç§»ç”¨æˆ·æ•°æ®","slug":"è¿ç§»ç”¨æˆ·æ•°æ®","link":"#è¿ç§»ç”¨æˆ·æ•°æ®","children":[]},{"level":3,"title":"è¿ç§»å¤§æ•°æ®","slug":"è¿ç§»å¤§æ•°æ®","link":"#è¿ç§»å¤§æ•°æ®","children":[]}]},{"level":2,"title":"ğŸ® å®æˆ˜æ¡ˆä¾‹ï¼šè§†é¢‘æ’­æ”¾å™¨æµè½¬","slug":"ğŸ®-å®æˆ˜æ¡ˆä¾‹-è§†é¢‘æ’­æ”¾å™¨æµè½¬","link":"#ğŸ®-å®æˆ˜æ¡ˆä¾‹-è§†é¢‘æ’­æ”¾å™¨æµè½¬","children":[]},{"level":2,"title":"ğŸ’¡ æœ€ä½³å®è·µ","slug":"ğŸ’¡-æœ€ä½³å®è·µ","link":"#ğŸ’¡-æœ€ä½³å®è·µ","children":[{"level":3,"title":"1. åªè¿ç§»å¿…è¦æ•°æ®","slug":"_1-åªè¿ç§»å¿…è¦æ•°æ®","link":"#_1-åªè¿ç§»å¿…è¦æ•°æ®","children":[]},{"level":3,"title":"2. ä½¿ç”¨åˆ†å¸ƒå¼å­˜å‚¨","slug":"_2-ä½¿ç”¨åˆ†å¸ƒå¼å­˜å‚¨","link":"#_2-ä½¿ç”¨åˆ†å¸ƒå¼å­˜å‚¨","children":[]},{"level":3,"title":"3. å¤„ç†è¿ç§»å¤±è´¥","slug":"_3-å¤„ç†è¿ç§»å¤±è´¥","link":"#_3-å¤„ç†è¿ç§»å¤±è´¥","children":[]}]},{"level":2,"title":"ğŸ“š å‚è€ƒèµ„æº","slug":"ğŸ“š-å‚è€ƒèµ„æº","link":"#ğŸ“š-å‚è€ƒèµ„æº","children":[]}],"git":{"createdTime":1765250065000,"updatedTime":1765250065000,"contributors":[{"name":"CambridgeFoldingKnife","email":"3144253125@qq.com","commits":1}]},"filePathRelative":"tutorials/harmonyos-dev/10-distributed-next/02-è·¨è®¾å¤‡æµè½¬.md"}');export{y as comp,g as data};
