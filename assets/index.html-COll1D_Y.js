import{_ as o,c as i,d as u,e as s,f as a,b as p,w as e,r as c,o as r}from"./app-D9dfRPMK.js";const k={},d={href:"https://docs.oracle.com/javase/tutorial/jdbc/",target:"_blank",rel:"noopener noreferrer"},v={href:"https://dev.mysql.com/downloads/connector/j/",target:"_blank",rel:"noopener noreferrer"},m={href:"https://github.com/alibaba/druid",target:"_blank",rel:"noopener noreferrer"};function b(h,n){const l=c("ExternalLinkIcon"),t=c("RouteLink");return r(),i("div",null,[n[13]||(n[13]=u(`<h1 id="ğŸ’¾-jdbc-javaæ•°æ®åº“è¿æ¥" tabindex="-1"><a class="header-anchor" href="#ğŸ’¾-jdbc-javaæ•°æ®åº“è¿æ¥"><span>ğŸ’¾ JDBC - Javaæ•°æ®åº“è¿æ¥</span></a></h1><blockquote><p>JDBC (Java Database Connectivity) æ˜¯Javaè®¿é—®æ•°æ®åº“çš„æ ‡å‡†æ¥å£</p></blockquote><h2 id="ğŸ“–-å­¦ä¹ ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#ğŸ“–-å­¦ä¹ ç›®æ ‡"><span>ğŸ“– å­¦ä¹ ç›®æ ‡</span></a></h2><ul><li>ç†è§£JDBCçš„æ ¸å¿ƒæ¦‚å¿µå’Œå·¥ä½œåŸç†</li><li>æŒæ¡JDBCçš„åŸºæœ¬æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</li><li>å­¦ä¼šä½¿ç”¨PreparedStatementé˜²æ­¢SQLæ³¨å…¥</li><li>ç†è§£æ•°æ®åº“è¿æ¥æ± çš„é‡è¦æ€§</li><li>æŒæ¡äº‹åŠ¡å¤„ç†æœºåˆ¶</li></ul><h2 id="ğŸ¯-æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#ğŸ¯-æ ¸å¿ƒæ¦‚å¿µ"><span>ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ</span></a></h2><h3 id="jdbcæ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#jdbcæ˜¯ä»€ä¹ˆ"><span>JDBCæ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h3><p>JDBCæ˜¯Javaæä¾›çš„ä¸€å¥—ç”¨äºæ‰§è¡ŒSQLè¯­å¥çš„APIï¼Œå¯ä»¥ä¸ºå¤šç§å…³ç³»å‹æ•°æ®åº“æä¾›ç»Ÿä¸€è®¿é—®ã€‚</p><h3 id="jdbcæ¶æ„" tabindex="-1"><a class="header-anchor" href="#jdbcæ¶æ„"><span>JDBCæ¶æ„</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">Javaåº”ç”¨ç¨‹åº</span>
<span class="line">    â†“</span>
<span class="line">JDBC API</span>
<span class="line">    â†“</span>
<span class="line">JDBCé©±åŠ¨ç®¡ç†å™¨</span>
<span class="line">    â†“</span>
<span class="line">JDBCé©±åŠ¨ç¨‹åº</span>
<span class="line">    â†“</span>
<span class="line">æ•°æ®åº“</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”§-jdbcæ ¸å¿ƒæ¥å£" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-jdbcæ ¸å¿ƒæ¥å£"><span>ğŸ”§ JDBCæ ¸å¿ƒæ¥å£</span></a></h2><h3 id="_1-drivermanager-é©±åŠ¨ç®¡ç†å™¨" tabindex="-1"><a class="header-anchor" href="#_1-drivermanager-é©±åŠ¨ç®¡ç†å™¨"><span>1. DriverManagerï¼ˆé©±åŠ¨ç®¡ç†å™¨ï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// æ³¨å†Œé©±åŠ¨</span></span>
<span class="line"><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è·å–æ•°æ®åº“è¿æ¥</span></span>
<span class="line"><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token string">&quot;jdbc:mysql://localhost:3306/mydb&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;password&quot;</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-connection-æ•°æ®åº“è¿æ¥" tabindex="-1"><a class="header-anchor" href="#_2-connection-æ•°æ®åº“è¿æ¥"><span>2. Connectionï¼ˆæ•°æ®åº“è¿æ¥ï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// åˆ›å»ºStatement</span></span>
<span class="line"><span class="token class-name">Statement</span> stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åˆ›å»ºPreparedStatement</span></span>
<span class="line"><span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// äº‹åŠ¡ç®¡ç†</span></span>
<span class="line">conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å¼€å¯äº‹åŠ¡</span></span>
<span class="line">conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// æäº¤äº‹åŠ¡</span></span>
<span class="line">conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// å›æ»šäº‹åŠ¡</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-statement-sqlè¯­å¥æ‰§è¡Œå™¨" tabindex="-1"><a class="header-anchor" href="#_3-statement-sqlè¯­å¥æ‰§è¡Œå™¨"><span>3. Statementï¼ˆSQLè¯­å¥æ‰§è¡Œå™¨ï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// æ‰§è¡ŒæŸ¥è¯¢</span></span>
<span class="line"><span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM users&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ‰§è¡Œæ›´æ–°</span></span>
<span class="line"><span class="token keyword">int</span> rows <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;DELETE FROM users WHERE id = 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ‰§è¡Œä»»æ„SQL</span></span>
<span class="line"><span class="token keyword">boolean</span> hasResult <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-preparedstatement-é¢„ç¼–è¯‘è¯­å¥" tabindex="-1"><a class="header-anchor" href="#_4-preparedstatement-é¢„ç¼–è¯‘è¯­å¥"><span>4. PreparedStatementï¼ˆé¢„ç¼–è¯‘è¯­å¥ï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM users WHERE id = ? AND name = ?&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">pstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pstmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-resultset-ç»“æœé›†" tabindex="-1"><a class="header-anchor" href="#_5-resultset-ç»“æœé›†"><span>5. ResultSetï¼ˆç»“æœé›†ï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> id <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">String</span> name <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> age <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token string">&quot; - &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot; - &quot;</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ’»-åŸºç¡€æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#ğŸ’»-åŸºç¡€æ“ä½œ"><span>ğŸ’» åŸºç¡€æ“ä½œ</span></a></h2><h3 id="æŸ¥è¯¢æ“ä½œ-select" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¯¢æ“ä½œ-select"><span>æŸ¥è¯¢æ“ä½œï¼ˆSELECTï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM users&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">         <span class="token class-name">Statement</span> stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">         <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">        <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> users<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ’å…¥æ“ä½œ-insert" tabindex="-1"><a class="header-anchor" href="#æ’å…¥æ“ä½œ-insert"><span>æ’å…¥æ“ä½œï¼ˆINSERTï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO users(name, age) VALUES(?, ?)&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">         <span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">        pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        pstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token keyword">return</span> pstmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ›´æ–°æ“ä½œ-update" tabindex="-1"><a class="header-anchor" href="#æ›´æ–°æ“ä½œ-update"><span>æ›´æ–°æ“ä½œï¼ˆUPDATEï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;UPDATE users SET name = ?, age = ? WHERE id = ?&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">         <span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">        pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        pstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        pstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token keyword">return</span> pstmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ é™¤æ“ä½œ-delete" tabindex="-1"><a class="header-anchor" href="#åˆ é™¤æ“ä½œ-delete"><span>åˆ é™¤æ“ä½œï¼ˆDELETEï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;DELETE FROM users WHERE id = ?&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">         <span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">        pstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> pstmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”-äº‹åŠ¡å¤„ç†" tabindex="-1"><a class="header-anchor" href="#ğŸ”-äº‹åŠ¡å¤„ç†"><span>ğŸ” äº‹åŠ¡å¤„ç†</span></a></h2><h3 id="åŸºæœ¬äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬äº‹åŠ¡"><span>åŸºæœ¬äº‹åŠ¡</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transferMoney</span><span class="token punctuation">(</span><span class="token keyword">int</span> fromId<span class="token punctuation">,</span> <span class="token keyword">int</span> toId<span class="token punctuation">,</span> <span class="token keyword">double</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">        conn <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// å…³é—­è‡ªåŠ¨æäº¤</span></span>
<span class="line">        conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// æ‰£æ¬¾</span></span>
<span class="line">        <span class="token class-name">String</span> sql1 <span class="token operator">=</span> <span class="token string">&quot;UPDATE accounts SET balance = balance - ? WHERE id = ?&quot;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">PreparedStatement</span> pstmt1 <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        pstmt1<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        pstmt1<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> fromId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        pstmt1<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// åŠ æ¬¾</span></span>
<span class="line">        <span class="token class-name">String</span> sql2 <span class="token operator">=</span> <span class="token string">&quot;UPDATE accounts SET balance = balance + ? WHERE id = ?&quot;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">PreparedStatement</span> pstmt2 <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        pstmt2<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        pstmt2<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> toId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        pstmt2<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// æäº¤äº‹åŠ¡</span></span>
<span class="line">        conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// å›æ»šäº‹åŠ¡</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">                conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">                conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸŠ-æ•°æ®åº“è¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#ğŸŠ-æ•°æ®åº“è¿æ¥æ± "><span>ğŸŠ æ•°æ®åº“è¿æ¥æ± </span></a></h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦è¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦è¿æ¥æ± "><span>ä¸ºä»€ä¹ˆéœ€è¦è¿æ¥æ± ï¼Ÿ</span></a></h3><ul><li>åˆ›å»ºå’Œé”€æ¯æ•°æ®åº“è¿æ¥å¼€é”€å¤§</li><li>é¢‘ç¹åˆ›å»ºè¿æ¥å½±å“æ€§èƒ½</li><li>è¿æ¥æ± å¯ä»¥å¤ç”¨è¿æ¥ï¼Œæé«˜æ•ˆç‡</li></ul><h3 id="druidè¿æ¥æ± é…ç½®" tabindex="-1"><a class="header-anchor" href="#druidè¿æ¥æ± é…ç½®"><span>Druidè¿æ¥æ± é…ç½®</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DruidUtil</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">static</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Properties</span> prop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">            prop<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">DruidUtil</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            dataSource <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> <span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> dataSource<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="druid-propertiesé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#druid-propertiesé…ç½®æ–‡ä»¶"><span>druid.propertiesé…ç½®æ–‡ä»¶</span></a></h3><div class="language-properties line-numbers-mode" data-highlighter="prismjs" data-ext="properties" data-title="properties"><pre><code><span class="line"><span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/mydb?useSSL=false&amp;serverTimezone=UTC</span></span>
<span class="line"><span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span></span>
<span class="line"><span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span></span>
<span class="line"><span class="token comment"># åˆå§‹åŒ–è¿æ¥æ•°</span></span>
<span class="line"><span class="token key attr-name">initialSize</span><span class="token punctuation">=</span><span class="token value attr-value">5</span></span>
<span class="line"><span class="token comment"># æœ€å¤§è¿æ¥æ•°</span></span>
<span class="line"><span class="token key attr-name">maxActive</span><span class="token punctuation">=</span><span class="token value attr-value">20</span></span>
<span class="line"><span class="token comment"># æœ€å¤§ç­‰å¾…æ—¶é—´</span></span>
<span class="line"><span class="token key attr-name">maxWait</span><span class="token punctuation">=</span><span class="token value attr-value">3000</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“‹-å·¥å…·ç±»å°è£…" tabindex="-1"><a class="header-anchor" href="#ğŸ“‹-å·¥å…·ç±»å°è£…"><span>ğŸ“‹ å·¥å…·ç±»å°è£…</span></a></h2><h3 id="jdbcå·¥å…·ç±»" tabindex="-1"><a class="header-anchor" href="#jdbcå·¥å…·ç±»"><span>JDBCå·¥å…·ç±»</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtil</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/mydb&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">USER</span> <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">PASSWORD</span> <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">static</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// è·å–è¿æ¥</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">,</span> <span class="token constant">USER</span><span class="token punctuation">,</span> <span class="token constant">PASSWORD</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// é‡Šæ”¾èµ„æº</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">,</span> <span class="token class-name">Statement</span> stmt<span class="token punctuation">,</span> <span class="token class-name">ResultSet</span> rs<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>rs <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">                rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>stmt <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">                stmt<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">                conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="âš ï¸-å¸¸è§é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#âš ï¸-å¸¸è§é—®é¢˜"><span>âš ï¸ å¸¸è§é—®é¢˜</span></a></h2><h3 id="_1-sqlæ³¨å…¥é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_1-sqlæ³¨å…¥é—®é¢˜"><span>1. SQLæ³¨å…¥é—®é¢˜</span></a></h3><p><strong>é”™è¯¯ç¤ºä¾‹ï¼š</strong></p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM users WHERE name = &#39;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;&#39;&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>æ­£ç¡®åšæ³•ï¼š</strong></p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM users WHERE name = ?&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-èµ„æºæœªå…³é—­" tabindex="-1"><a class="header-anchor" href="#_2-èµ„æºæœªå…³é—­"><span>2. èµ„æºæœªå…³é—­</span></a></h3><p><strong>æ¨èä½¿ç”¨try-with-resourcesï¼š</strong></p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">     <span class="token class-name">PreparedStatement</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">     <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pstmt<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ä½¿ç”¨èµ„æº</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-äº‹åŠ¡ç®¡ç†ä¸å½“" tabindex="-1"><a class="header-anchor" href="#_3-äº‹åŠ¡ç®¡ç†ä¸å½“"><span>3. äº‹åŠ¡ç®¡ç†ä¸å½“</span></a></h3><ul><li>å¿˜è®°æäº¤äº‹åŠ¡</li><li>å¼‚å¸¸æ—¶æœªå›æ»š</li><li>æœªæ¢å¤è‡ªåŠ¨æäº¤æ¨¡å¼</li></ul><h2 id="ğŸ¯-æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#ğŸ¯-æœ€ä½³å®è·µ"><span>ğŸ¯ æœ€ä½³å®è·µ</span></a></h2><ol><li><strong>ä½¿ç”¨PreparedStatement</strong> - é˜²æ­¢SQLæ³¨å…¥ï¼Œæé«˜æ€§èƒ½</li><li><strong>ä½¿ç”¨è¿æ¥æ± </strong> - æé«˜æ•°æ®åº“è®¿é—®æ•ˆç‡</li><li><strong>åŠæ—¶é‡Šæ”¾èµ„æº</strong> - ä½¿ç”¨try-with-resourcesæˆ–finallyå—</li><li><strong>åˆç†ä½¿ç”¨äº‹åŠ¡</strong> - ä¿è¯æ•°æ®ä¸€è‡´æ€§</li><li><strong>å¼‚å¸¸å¤„ç†</strong> - æ•è·å¹¶å¤„ç†SQLException</li><li><strong>å‚æ•°æ ¡éªŒ</strong> - è¾“å…¥å‚æ•°è¿›è¡Œæ ¡éªŒ</li></ol><h2 id="ğŸ“š-ç›¸å…³èµ„æº" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-ç›¸å…³èµ„æº"><span>ğŸ“š ç›¸å…³èµ„æº</span></a></h2>`,56)),s("ul",null,[s("li",null,[s("a",d,[n[0]||(n[0]=a("JDBCå®˜æ–¹æ–‡æ¡£",-1)),p(l)])]),s("li",null,[s("a",v,[n[1]||(n[1]=a("MySQL JDBCé©±åŠ¨",-1)),p(l)])]),s("li",null,[s("a",m,[n[2]||(n[2]=a("Druidè¿æ¥æ± ",-1)),p(l)])])]),n[14]||(n[14]=s("h2",{id:"ğŸ”—-ç›¸å…³ä¸»é¢˜",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#ğŸ”—-ç›¸å…³ä¸»é¢˜"},[s("span",null,"ğŸ”— ç›¸å…³ä¸»é¢˜")])],-1)),s("ul",null,[s("li",null,[p(t,{to:"/tutorials/java-backend/mysql/"},{default:e(()=>[...n[3]||(n[3]=[a("MySQLæ•°æ®åº“",-1)])]),_:1}),n[4]||(n[4]=a(" - æ•°æ®åº“åŸºç¡€",-1))]),s("li",null,[p(t,{to:"/tutorials/java-backend/mybatis/"},{default:e(()=>[...n[5]||(n[5]=[a("MyBatisæ¡†æ¶",-1)])]),_:1}),n[6]||(n[6]=a(" - ORMæ¡†æ¶",-1))]),s("li",null,[p(t,{to:"/tutorials/java-backend/spring/"},{default:e(()=>[...n[7]||(n[7]=[a("Spring JDBC",-1)])]),_:1}),n[8]||(n[8]=a(" - Springçš„JDBCæ”¯æŒ",-1))])]),n[15]||(n[15]=s("hr",null,null,-1)),s("p",null,[n[10]||(n[10]=s("strong",null,"ä¸‹ä¸€æ­¥å­¦ä¹ ï¼š",-1)),n[11]||(n[11]=a()),p(t,{to:"/tutorials/java-backend/mybatis/"},{default:e(()=>[...n[9]||(n[9]=[a("MyBatisæ¡†æ¶",-1)])]),_:1}),n[12]||(n[12]=a(" - æ›´å¼ºå¤§çš„æŒä¹…å±‚æ¡†æ¶",-1))])])}const f=o(k,[["render",b]]),y=JSON.parse('{"path":"/tutorials/java-backend/jdbc/","title":"JDBC æ•°æ®åº“è¿æ¥","lang":"zh-CN","frontmatter":{"title":"JDBC æ•°æ®åº“è¿æ¥"},"headers":[{"level":2,"title":"ğŸ“– å­¦ä¹ ç›®æ ‡","slug":"ğŸ“–-å­¦ä¹ ç›®æ ‡","link":"#ğŸ“–-å­¦ä¹ ç›®æ ‡","children":[]},{"level":2,"title":"ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ","slug":"ğŸ¯-æ ¸å¿ƒæ¦‚å¿µ","link":"#ğŸ¯-æ ¸å¿ƒæ¦‚å¿µ","children":[{"level":3,"title":"JDBCæ˜¯ä»€ä¹ˆï¼Ÿ","slug":"jdbcæ˜¯ä»€ä¹ˆ","link":"#jdbcæ˜¯ä»€ä¹ˆ","children":[]},{"level":3,"title":"JDBCæ¶æ„","slug":"jdbcæ¶æ„","link":"#jdbcæ¶æ„","children":[]}]},{"level":2,"title":"ğŸ”§ JDBCæ ¸å¿ƒæ¥å£","slug":"ğŸ”§-jdbcæ ¸å¿ƒæ¥å£","link":"#ğŸ”§-jdbcæ ¸å¿ƒæ¥å£","children":[{"level":3,"title":"1. DriverManagerï¼ˆé©±åŠ¨ç®¡ç†å™¨ï¼‰","slug":"_1-drivermanager-é©±åŠ¨ç®¡ç†å™¨","link":"#_1-drivermanager-é©±åŠ¨ç®¡ç†å™¨","children":[]},{"level":3,"title":"2. Connectionï¼ˆæ•°æ®åº“è¿æ¥ï¼‰","slug":"_2-connection-æ•°æ®åº“è¿æ¥","link":"#_2-connection-æ•°æ®åº“è¿æ¥","children":[]},{"level":3,"title":"3. Statementï¼ˆSQLè¯­å¥æ‰§è¡Œå™¨ï¼‰","slug":"_3-statement-sqlè¯­å¥æ‰§è¡Œå™¨","link":"#_3-statement-sqlè¯­å¥æ‰§è¡Œå™¨","children":[]},{"level":3,"title":"4. PreparedStatementï¼ˆé¢„ç¼–è¯‘è¯­å¥ï¼‰","slug":"_4-preparedstatement-é¢„ç¼–è¯‘è¯­å¥","link":"#_4-preparedstatement-é¢„ç¼–è¯‘è¯­å¥","children":[]},{"level":3,"title":"5. ResultSetï¼ˆç»“æœé›†ï¼‰","slug":"_5-resultset-ç»“æœé›†","link":"#_5-resultset-ç»“æœé›†","children":[]}]},{"level":2,"title":"ğŸ’» åŸºç¡€æ“ä½œ","slug":"ğŸ’»-åŸºç¡€æ“ä½œ","link":"#ğŸ’»-åŸºç¡€æ“ä½œ","children":[{"level":3,"title":"æŸ¥è¯¢æ“ä½œï¼ˆSELECTï¼‰","slug":"æŸ¥è¯¢æ“ä½œ-select","link":"#æŸ¥è¯¢æ“ä½œ-select","children":[]},{"level":3,"title":"æ’å…¥æ“ä½œï¼ˆINSERTï¼‰","slug":"æ’å…¥æ“ä½œ-insert","link":"#æ’å…¥æ“ä½œ-insert","children":[]},{"level":3,"title":"æ›´æ–°æ“ä½œï¼ˆUPDATEï¼‰","slug":"æ›´æ–°æ“ä½œ-update","link":"#æ›´æ–°æ“ä½œ-update","children":[]},{"level":3,"title":"åˆ é™¤æ“ä½œï¼ˆDELETEï¼‰","slug":"åˆ é™¤æ“ä½œ-delete","link":"#åˆ é™¤æ“ä½œ-delete","children":[]}]},{"level":2,"title":"ğŸ” äº‹åŠ¡å¤„ç†","slug":"ğŸ”-äº‹åŠ¡å¤„ç†","link":"#ğŸ”-äº‹åŠ¡å¤„ç†","children":[{"level":3,"title":"åŸºæœ¬äº‹åŠ¡","slug":"åŸºæœ¬äº‹åŠ¡","link":"#åŸºæœ¬äº‹åŠ¡","children":[]}]},{"level":2,"title":"ğŸŠ æ•°æ®åº“è¿æ¥æ± ","slug":"ğŸŠ-æ•°æ®åº“è¿æ¥æ± ","link":"#ğŸŠ-æ•°æ®åº“è¿æ¥æ± ","children":[{"level":3,"title":"ä¸ºä»€ä¹ˆéœ€è¦è¿æ¥æ± ï¼Ÿ","slug":"ä¸ºä»€ä¹ˆéœ€è¦è¿æ¥æ± ","link":"#ä¸ºä»€ä¹ˆéœ€è¦è¿æ¥æ± ","children":[]},{"level":3,"title":"Druidè¿æ¥æ± é…ç½®","slug":"druidè¿æ¥æ± é…ç½®","link":"#druidè¿æ¥æ± é…ç½®","children":[]},{"level":3,"title":"druid.propertiesé…ç½®æ–‡ä»¶","slug":"druid-propertiesé…ç½®æ–‡ä»¶","link":"#druid-propertiesé…ç½®æ–‡ä»¶","children":[]}]},{"level":2,"title":"ğŸ“‹ å·¥å…·ç±»å°è£…","slug":"ğŸ“‹-å·¥å…·ç±»å°è£…","link":"#ğŸ“‹-å·¥å…·ç±»å°è£…","children":[{"level":3,"title":"JDBCå·¥å…·ç±»","slug":"jdbcå·¥å…·ç±»","link":"#jdbcå·¥å…·ç±»","children":[]}]},{"level":2,"title":"âš ï¸ å¸¸è§é—®é¢˜","slug":"âš ï¸-å¸¸è§é—®é¢˜","link":"#âš ï¸-å¸¸è§é—®é¢˜","children":[{"level":3,"title":"1. SQLæ³¨å…¥é—®é¢˜","slug":"_1-sqlæ³¨å…¥é—®é¢˜","link":"#_1-sqlæ³¨å…¥é—®é¢˜","children":[]},{"level":3,"title":"2. èµ„æºæœªå…³é—­","slug":"_2-èµ„æºæœªå…³é—­","link":"#_2-èµ„æºæœªå…³é—­","children":[]},{"level":3,"title":"3. äº‹åŠ¡ç®¡ç†ä¸å½“","slug":"_3-äº‹åŠ¡ç®¡ç†ä¸å½“","link":"#_3-äº‹åŠ¡ç®¡ç†ä¸å½“","children":[]}]},{"level":2,"title":"ğŸ¯ æœ€ä½³å®è·µ","slug":"ğŸ¯-æœ€ä½³å®è·µ","link":"#ğŸ¯-æœ€ä½³å®è·µ","children":[]},{"level":2,"title":"ğŸ“š ç›¸å…³èµ„æº","slug":"ğŸ“š-ç›¸å…³èµ„æº","link":"#ğŸ“š-ç›¸å…³èµ„æº","children":[]},{"level":2,"title":"ğŸ”— ç›¸å…³ä¸»é¢˜","slug":"ğŸ”—-ç›¸å…³ä¸»é¢˜","link":"#ğŸ”—-ç›¸å…³ä¸»é¢˜","children":[]}],"git":{"createdTime":1765249786000,"updatedTime":1765249786000,"contributors":[{"name":"CambridgeFoldingKnife","email":"3144253125@qq.com","commits":1}]},"filePathRelative":"tutorials/java-backend/jdbc/README.md"}');export{f as comp,y as data};
