import{_ as i,c as o,d as c,e as s,f as a,b as e,w as r,r as t,o as d}from"./app-DyGs7pMe.js";const u={},k={href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ai-overview-0000001820880597-V5",target:"_blank",rel:"noopener noreferrer"},m={href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/mindspore-lite-guidelines-0000001774121034-V5",target:"_blank",rel:"noopener noreferrer"};function v(h,n){const p=t("ExternalLinkIcon"),l=t("RouteLink");return d(),o("div",null,[n[5]||(n[5]=c(`<h1 id="ai-engine-api" tabindex="-1"><a class="header-anchor" href="#ai-engine-api"><span>AI Engine API</span></a></h1><blockquote><p>æŒæ¡ AI Engine æ ¸å¿ƒ API</p></blockquote><h2 id="ğŸ¯-ai-engine-åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#ğŸ¯-ai-engine-åˆå§‹åŒ–"><span>ğŸ¯ AI Engine åˆå§‹åŒ–</span></a></h2><h3 id="åˆ›å»º-ai-å¼•æ“" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-ai-å¼•æ“"><span>åˆ›å»º AI å¼•æ“</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> aiEngine <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ohos.ai.engine&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åˆå§‹åŒ–é…ç½®</span></span>
<span class="line"><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  enableNPU<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token comment">// å¯ç”¨ NPU åŠ é€Ÿ</span></span>
<span class="line">  enableGPU<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token comment">// å¯ç”¨ GPU åŠ é€Ÿ</span></span>
<span class="line">  threads<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>           <span class="token comment">// çº¿ç¨‹æ•°</span></span>
<span class="line">  priority<span class="token operator">:</span> <span class="token string">&#39;high&#39;</span>      <span class="token comment">// ä¼˜å…ˆçº§</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åˆ›å»ºå¼•æ“å®ä¾‹</span></span>
<span class="line"><span class="token keyword">const</span> engine <span class="token operator">=</span> aiEngine<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”§-æ¨¡å‹ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-æ¨¡å‹ç®¡ç†"><span>ğŸ”§ æ¨¡å‹ç®¡ç†</span></a></h2><h3 id="åŠ è½½æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#åŠ è½½æ¨¡å‹"><span>åŠ è½½æ¨¡å‹</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// åŠ è½½æœ¬åœ°æ¨¡å‹</span></span>
<span class="line"><span class="token keyword">const</span> model <span class="token operator">=</span> <span class="token keyword">await</span> engine<span class="token punctuation">.</span><span class="token function">loadModel</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  modelPath<span class="token operator">:</span> <span class="token string">&#39;/data/storage/el2/base/files/model.ms&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  modelType<span class="token operator">:</span> <span class="token string">&#39;MindSpore&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åŠ è½½äº‘ç«¯æ¨¡å‹</span></span>
<span class="line"><span class="token keyword">const</span> cloudModel <span class="token operator">=</span> <span class="token keyword">await</span> engine<span class="token punctuation">.</span><span class="token function">loadModelFromCloud</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  modelId<span class="token operator">:</span> <span class="token string">&#39;image_classifier_v1&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  cacheDir<span class="token operator">:</span> <span class="token string">&#39;/data/storage/el2/base/cache/&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¨¡å‹æ¨ç†" tabindex="-1"><a class="header-anchor" href="#æ¨¡å‹æ¨ç†"><span>æ¨¡å‹æ¨ç†</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// å‡†å¤‡è¾“å…¥æ•°æ®</span></span>
<span class="line"><span class="token keyword">const</span> inputData <span class="token operator">=</span> <span class="token function">prepareInputData</span><span class="token punctuation">(</span>imageData<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ‰§è¡Œæ¨ç†</span></span>
<span class="line"><span class="token keyword">const</span> output <span class="token operator">=</span> <span class="token keyword">await</span> model<span class="token punctuation">.</span><span class="token function">infer</span><span class="token punctuation">(</span>inputData<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¤„ç†è¾“å‡º</span></span>
<span class="line"><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">parseOutput</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span></span>
<span class="line"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ¨ç†ç»“æœ:&#39;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ’¡-æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#ğŸ’¡-æœ€ä½³å®è·µ"><span>ğŸ’¡ æœ€ä½³å®è·µ</span></a></h2><h3 id="_1-å¤ç”¨æ¨¡å‹å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_1-å¤ç”¨æ¨¡å‹å®ä¾‹"><span>1. å¤ç”¨æ¨¡å‹å®ä¾‹</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// âœ… å•ä¾‹æ¨¡å¼</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ModelManager</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">static</span> instance<span class="token operator">:</span> Model</span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">await</span> engine<span class="token punctuation">.</span><span class="token function">loadModel</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-ç¡¬ä»¶åŠ é€Ÿ" tabindex="-1"><a class="header-anchor" href="#_2-ç¡¬ä»¶åŠ é€Ÿ"><span>2. ç¡¬ä»¶åŠ é€Ÿ</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// å¯ç”¨ NPU åŠ é€Ÿ</span></span>
<span class="line"><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  enableNPU<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  precision<span class="token operator">:</span> <span class="token string">&#39;FP16&#39;</span>  <span class="token comment">// åŠç²¾åº¦è®¡ç®—</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-æ‰¹é‡æ¨ç†" tabindex="-1"><a class="header-anchor" href="#_3-æ‰¹é‡æ¨ç†"><span>3. æ‰¹é‡æ¨ç†</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// æ‰¹é‡å¤„ç†æé«˜æ•ˆç‡</span></span>
<span class="line"><span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> model<span class="token punctuation">.</span><span class="token function">batchInfer</span><span class="token punctuation">(</span>inputBatch<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  batchSize<span class="token operator">:</span> <span class="token number">32</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“š-å‚è€ƒèµ„æº" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-å‚è€ƒèµ„æº"><span>ğŸ“š å‚è€ƒèµ„æº</span></a></h2>`,18)),s("ul",null,[s("li",null,[s("a",k,[n[0]||(n[0]=a("AIèƒ½åŠ›æ¦‚è¿°",-1)),e(p)])]),s("li",null,[s("a",m,[n[1]||(n[1]=a("MindSpore Lite",-1)),e(p)])])]),n[6]||(n[6]=s("hr",null,null,-1)),s("p",null,[n[3]||(n[3]=s("strong",null,"ä¸‹ä¸€èŠ‚",-1)),n[4]||(n[4]=a(" â†’ ",-1)),e(l,{to:"/tutorials/harmonyos-dev/09-ai-native/03-%E8%AF%AD%E9%9F%B3%E8%AF%86%E5%88%AB%E4%B8%8E%E5%90%88%E6%88%90.html"},{default:r(()=>[...n[2]||(n[2]=[a("è¯­éŸ³è¯†åˆ«ä¸åˆæˆ",-1)])]),_:1})])])}const g=i(u,[["render",v]]),y=JSON.parse('{"path":"/tutorials/harmonyos-dev/09-ai-native/02-AI-Engine-API.html","title":"AI Engine API","lang":"zh-CN","frontmatter":{"title":"AI Engine API","date":"2025-01-22T00:00:00.000Z"},"headers":[{"level":2,"title":"ğŸ¯ AI Engine åˆå§‹åŒ–","slug":"ğŸ¯-ai-engine-åˆå§‹åŒ–","link":"#ğŸ¯-ai-engine-åˆå§‹åŒ–","children":[{"level":3,"title":"åˆ›å»º AI å¼•æ“","slug":"åˆ›å»º-ai-å¼•æ“","link":"#åˆ›å»º-ai-å¼•æ“","children":[]}]},{"level":2,"title":"ğŸ”§ æ¨¡å‹ç®¡ç†","slug":"ğŸ”§-æ¨¡å‹ç®¡ç†","link":"#ğŸ”§-æ¨¡å‹ç®¡ç†","children":[{"level":3,"title":"åŠ è½½æ¨¡å‹","slug":"åŠ è½½æ¨¡å‹","link":"#åŠ è½½æ¨¡å‹","children":[]},{"level":3,"title":"æ¨¡å‹æ¨ç†","slug":"æ¨¡å‹æ¨ç†","link":"#æ¨¡å‹æ¨ç†","children":[]}]},{"level":2,"title":"ğŸ’¡ æœ€ä½³å®è·µ","slug":"ğŸ’¡-æœ€ä½³å®è·µ","link":"#ğŸ’¡-æœ€ä½³å®è·µ","children":[{"level":3,"title":"1. å¤ç”¨æ¨¡å‹å®ä¾‹","slug":"_1-å¤ç”¨æ¨¡å‹å®ä¾‹","link":"#_1-å¤ç”¨æ¨¡å‹å®ä¾‹","children":[]},{"level":3,"title":"2. ç¡¬ä»¶åŠ é€Ÿ","slug":"_2-ç¡¬ä»¶åŠ é€Ÿ","link":"#_2-ç¡¬ä»¶åŠ é€Ÿ","children":[]},{"level":3,"title":"3. æ‰¹é‡æ¨ç†","slug":"_3-æ‰¹é‡æ¨ç†","link":"#_3-æ‰¹é‡æ¨ç†","children":[]}]},{"level":2,"title":"ğŸ“š å‚è€ƒèµ„æº","slug":"ğŸ“š-å‚è€ƒèµ„æº","link":"#ğŸ“š-å‚è€ƒèµ„æº","children":[]}],"git":{"createdTime":1765250065000,"updatedTime":1765250065000,"contributors":[{"name":"CambridgeFoldingKnife","email":"3144253125@qq.com","commits":1}]},"filePathRelative":"tutorials/harmonyos-dev/09-ai-native/02-AI-Engine-API.md"}');export{g as comp,y as data};
