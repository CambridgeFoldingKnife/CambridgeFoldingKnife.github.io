import{_ as e,c as t,d as l,e as s,f as a,b as o,w as c,r as i,o as u}from"./app-DyGs7pMe.js";const r={};function k(d,n){const p=i("RouteLink");return u(),t("div",null,[n[3]||(n[3]=l(`<h1 id="è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#è£…é¥°å™¨"><span>è£…é¥°å™¨</span></a></h1><blockquote><p>æŒæ¡Pythonè£…é¥°å™¨çš„ä½¿ç”¨ï¼Œç¼–å†™æ›´ä¼˜é›…çš„ä»£ç </p></blockquote><h2 id="ğŸ“š-å­¦ä¹ ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-å­¦ä¹ ç›®æ ‡"><span>ğŸ“š å­¦ä¹ ç›®æ ‡</span></a></h2><ul><li>ç†è§£è£…é¥°å™¨çš„æ¦‚å¿µå’ŒåŸç†</li><li>æŒæ¡å‡½æ•°è£…é¥°å™¨çš„ä½¿ç”¨</li><li>å­¦ä¼šåˆ›å»ºå¸¦å‚æ•°çš„è£…é¥°å™¨</li><li>æŒæ¡ç±»è£…é¥°å™¨</li></ul><h2 id="_1-è£…é¥°å™¨åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#_1-è£…é¥°å™¨åŸºç¡€"><span>1. è£…é¥°å™¨åŸºç¡€</span></a></h2><h3 id="_1-1-ä»€ä¹ˆæ˜¯è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#_1-1-ä»€ä¹ˆæ˜¯è£…é¥°å™¨"><span>1.1 ä»€ä¹ˆæ˜¯è£…é¥°å™¨</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token comment"># è£…é¥°å™¨ï¼šåœ¨ä¸ä¿®æ”¹åŸå‡½æ•°ä»£ç çš„æƒ…å†µä¸‹ï¼Œä¸ºå‡½æ•°æ·»åŠ æ–°åŠŸèƒ½</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">timer</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;è®¡æ—¶è£…é¥°å™¨&quot;&quot;&quot;</span></span>
<span class="line">    <span class="token keyword">import</span> time</span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        start <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        result <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span></span>
<span class="line">        end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;</span><span class="token interpolation"><span class="token punctuation">{</span>func<span class="token punctuation">.</span>__name__<span class="token punctuation">}</span></span><span class="token string"> è€—æ—¶: </span><span class="token interpolation"><span class="token punctuation">{</span>end <span class="token operator">-</span> start<span class="token punctuation">:</span><span class="token format-spec">.4f</span><span class="token punctuation">}</span></span><span class="token string">ç§’&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> result</span>
<span class="line">    <span class="token keyword">return</span> wrapper</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ä½¿ç”¨è£…é¥°å™¨</span></span>
<span class="line"><span class="token decorator annotation punctuation">@timer</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">slow_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">import</span> time</span>
<span class="line">    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;å‡½æ•°æ‰§è¡Œå®Œæˆ&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">slow_function<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-è£…é¥°å™¨åŸç†" tabindex="-1"><a class="header-anchor" href="#_1-2-è£…é¥°å™¨åŸç†"><span>1.2 è£…é¥°å™¨åŸç†</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token comment"># @timer ç­‰ä»·äº</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">slow_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span>
<span class="line">slow_function <span class="token operator">=</span> timer<span class="token punctuation">(</span>slow_function<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-å¸¸ç”¨è£…é¥°å™¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-å¸¸ç”¨è£…é¥°å™¨æ¨¡å¼"><span>2. å¸¸ç”¨è£…é¥°å™¨æ¨¡å¼</span></a></h2><h3 id="_2-1-æ—¥å¿—è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#_2-1-æ—¥å¿—è£…é¥°å™¨"><span>2.1 æ—¥å¿—è£…é¥°å™¨</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">logger</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;æ—¥å¿—è£…é¥°å™¨&quot;&quot;&quot;</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;è°ƒç”¨å‡½æ•°: </span><span class="token interpolation"><span class="token punctuation">{</span>func<span class="token punctuation">.</span>__name__<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;å‚æ•°: args=</span><span class="token interpolation"><span class="token punctuation">{</span>args<span class="token punctuation">}</span></span><span class="token string">, kwargs=</span><span class="token interpolation"><span class="token punctuation">{</span>kwargs<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">        result <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;è¿”å›å€¼: </span><span class="token interpolation"><span class="token punctuation">{</span>result<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> result</span>
<span class="line">    <span class="token keyword">return</span> wrapper</span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@logger</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">return</span> a <span class="token operator">+</span> b</span>
<span class="line"></span>
<span class="line">add<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-ç¼“å­˜è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#_2-2-ç¼“å­˜è£…é¥°å™¨"><span>2.2 ç¼“å­˜è£…é¥°å™¨</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">cache</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;ç®€å•çš„ç¼“å­˜è£…é¥°å™¨&quot;&quot;&quot;</span></span>
<span class="line">    cached_results <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">if</span> args <span class="token keyword">in</span> cached_results<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;ä»ç¼“å­˜è·å–: </span><span class="token interpolation"><span class="token punctuation">{</span>args<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> cached_results<span class="token punctuation">[</span>args<span class="token punctuation">]</span></span>
<span class="line">        </span>
<span class="line">        result <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span></span>
<span class="line">        cached_results<span class="token punctuation">[</span>args<span class="token punctuation">]</span> <span class="token operator">=</span> result</span>
<span class="line">        <span class="token keyword">return</span> result</span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> wrapper</span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@cache</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> n</span>
<span class="line">    <span class="token keyword">return</span> fibonacci<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> fibonacci<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>fibonacci<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-éªŒè¯è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#_2-3-éªŒè¯è£…é¥°å™¨"><span>2.3 éªŒè¯è£…é¥°å™¨</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">validate_input</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;è¾“å…¥éªŒè¯è£…é¥°å™¨&quot;&quot;&quot;</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">raise</span> TypeError<span class="token punctuation">(</span><span class="token string">&#39;x å¿…é¡»æ˜¯æ•°å­—&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">raise</span> TypeError<span class="token punctuation">(</span><span class="token string">&#39;y å¿…é¡»æ˜¯æ•°å­—&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> y <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">&#39;é™¤æ•°ä¸èƒ½ä¸ºé›¶&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> func<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> wrapper</span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@validate_input</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">divide</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">return</span> x <span class="token operator">/</span> y</span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>divide<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 5.0</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-å¸¦å‚æ•°çš„è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#_3-å¸¦å‚æ•°çš„è£…é¥°å™¨"><span>3. å¸¦å‚æ•°çš„è£…é¥°å™¨</span></a></h2><h3 id="_3-1-åŸºæœ¬è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#_3-1-åŸºæœ¬è¯­æ³•"><span>3.1 åŸºæœ¬è¯­æ³•</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">repeat</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;é‡å¤æ‰§è¡Œè£…é¥°å™¨&quot;&quot;&quot;</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">                result <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> result</span>
<span class="line">        <span class="token keyword">return</span> wrapper</span>
<span class="line">    <span class="token keyword">return</span> decorator</span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;Hello, </span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string">!&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">greet<span class="token punctuation">(</span><span class="token string">&#39;Python&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-æƒé™æ£€æŸ¥è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#_3-2-æƒé™æ£€æŸ¥è£…é¥°å™¨"><span>3.2 æƒé™æ£€æŸ¥è£…é¥°å™¨</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">require_auth</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;æƒé™æ£€æŸ¥è£…é¥°å™¨&quot;&quot;&quot;</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            user_role <span class="token operator">=</span> kwargs<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;role&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;guest&#39;</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">if</span> user_role <span class="token operator">!=</span> role<span class="token punctuation">:</span></span>
<span class="line">                <span class="token keyword">raise</span> PermissionError<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;éœ€è¦ </span><span class="token interpolation"><span class="token punctuation">{</span>role<span class="token punctuation">}</span></span><span class="token string"> æƒé™&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> wrapper</span>
<span class="line">    <span class="token keyword">return</span> decorator</span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@require_auth</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">delete_user</span><span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> role<span class="token operator">=</span><span class="token string">&#39;guest&#39;</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;åˆ é™¤ç”¨æˆ·: </span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">delete_user<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span> role<span class="token operator">=</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">)</span>  <span class="token comment"># æˆåŠŸ</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-ç±»è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#_4-ç±»è£…é¥°å™¨"><span>4. ç±»è£…é¥°å™¨</span></a></h2><h3 id="_4-1-ä½¿ç”¨ç±»ä½œä¸ºè£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#_4-1-ä½¿ç”¨ç±»ä½œä¸ºè£…é¥°å™¨"><span>4.1 ä½¿ç”¨ç±»ä½œä¸ºè£…é¥°å™¨</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Counter</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;è®¡æ•°è£…é¥°å™¨&quot;&quot;&quot;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>func <span class="token operator">=</span> func</span>
<span class="line">        self<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>count <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;è°ƒç”¨æ¬¡æ•°: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>count<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> self<span class="token punctuation">.</span>func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@Counter</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">say_hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;Hello!&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">say_hello<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># è°ƒç”¨æ¬¡æ•°: 1</span></span>
<span class="line">say_hello<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># è°ƒç”¨æ¬¡æ•°: 2</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-è£…é¥°ç±»" tabindex="-1"><a class="header-anchor" href="#_4-2-è£…é¥°ç±»"><span>4.2 è£…é¥°ç±»</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">singleton</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;å•ä¾‹è£…é¥°å™¨&quot;&quot;&quot;</span></span>
<span class="line">    instances <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get_instance</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">if</span> cls <span class="token keyword">not</span> <span class="token keyword">in</span> instances<span class="token punctuation">:</span></span>
<span class="line">            instances<span class="token punctuation">[</span>cls<span class="token punctuation">]</span> <span class="token operator">=</span> cls<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> instances<span class="token punctuation">[</span>cls<span class="token punctuation">]</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> get_instance</span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@singleton</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Database</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;åˆå§‹åŒ–æ•°æ®åº“è¿æ¥&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">db1 <span class="token operator">=</span> Database<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># åˆå§‹åŒ–æ•°æ®åº“è¿æ¥</span></span>
<span class="line">db2 <span class="token operator">=</span> Database<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># ä¸ä¼šå†æ¬¡åˆå§‹åŒ–</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>db1 <span class="token keyword">is</span> db2<span class="token punctuation">)</span>  <span class="token comment"># True</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-functools-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_5-functools-æ¨¡å—"><span>5. functools æ¨¡å—</span></a></h2><h3 id="_5-1-wraps-è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#_5-1-wraps-è£…é¥°å™¨"><span>5.1 wraps è£…é¥°å™¨</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">from</span> functools <span class="token keyword">import</span> wraps</span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">my_decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token decorator annotation punctuation">@wraps</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span>  <span class="token comment"># ä¿ç•™åŸå‡½æ•°çš„å…ƒä¿¡æ¯</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;è£…é¥°å™¨æ‰§è¡Œ&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> wrapper</span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@my_decorator</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹å‡½æ•°&quot;&quot;&quot;</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>example<span class="token punctuation">.</span>__name__<span class="token punctuation">)</span>  <span class="token comment"># example</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>example<span class="token punctuation">.</span>__doc__<span class="token punctuation">)</span>   <span class="token comment"># è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹å‡½æ•°</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-lru-cache-ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_5-2-lru-cache-ç¼“å­˜"><span>5.2 lru_cache ç¼“å­˜</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">from</span> functools <span class="token keyword">import</span> lru_cache</span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@lru_cache</span><span class="token punctuation">(</span>maxsize<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> n</span>
<span class="line">    <span class="token keyword">return</span> fibonacci<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> fibonacci<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>fibonacci<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># å¿«é€Ÿè®¡ç®—</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>fibonacci<span class="token punctuation">.</span>cache_info<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># æŸ¥çœ‹ç¼“å­˜ä¿¡æ¯</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-å¤šä¸ªè£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#_6-å¤šä¸ªè£…é¥°å™¨"><span>6. å¤šä¸ªè£…é¥°å™¨</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">decorator1</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;è£…é¥°å™¨1&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;æ‰§è¡Œè£…é¥°å™¨1&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> wrapper</span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">decorator2</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;è£…é¥°å™¨2&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;æ‰§è¡Œè£…é¥°å™¨2&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> wrapper</span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@decorator1</span></span>
<span class="line"><span class="token decorator annotation punctuation">@decorator2</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">my_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;åŸå§‹å‡½æ•°&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">my_function<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># è¾“å‡ºé¡ºåºï¼šè£…é¥°å™¨2 -&gt; è£…é¥°å™¨1 -&gt; æ‰§è¡Œè£…é¥°å™¨1 -&gt; æ‰§è¡Œè£…é¥°å™¨2 -&gt; åŸå§‹å‡½æ•°</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-å®æˆ˜æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_7-å®æˆ˜æ¡ˆä¾‹"><span>7. å®æˆ˜æ¡ˆä¾‹</span></a></h2><h3 id="æ¡ˆä¾‹1-æ€§èƒ½ç›‘æ§" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹1-æ€§èƒ½ç›‘æ§"><span>æ¡ˆä¾‹1ï¼šæ€§èƒ½ç›‘æ§</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> time</span>
<span class="line"><span class="token keyword">from</span> functools <span class="token keyword">import</span> wraps</span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">performance_monitor</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token decorator annotation punctuation">@wraps</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        start_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        start_memory <span class="token operator">=</span> get_memory_usage<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        result <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        end_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        end_memory <span class="token operator">=</span> get_memory_usage<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;å‡½æ•°: </span><span class="token interpolation"><span class="token punctuation">{</span>func<span class="token punctuation">.</span>__name__<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;è€—æ—¶: </span><span class="token interpolation"><span class="token punctuation">{</span>end_time <span class="token operator">-</span> start_time<span class="token punctuation">:</span><span class="token format-spec">.4f</span><span class="token punctuation">}</span></span><span class="token string">ç§’&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;å†…å­˜: </span><span class="token interpolation"><span class="token punctuation">{</span>end_memory <span class="token operator">-</span> start_memory<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">MB&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token keyword">return</span> result</span>
<span class="line">    <span class="token keyword">return</span> wrapper</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¡ˆä¾‹2-é‡è¯•æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹2-é‡è¯•æœºåˆ¶"><span>æ¡ˆä¾‹2ï¼šé‡è¯•æœºåˆ¶</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> time</span>
<span class="line"><span class="token keyword">from</span> functools <span class="token keyword">import</span> wraps</span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">retry</span><span class="token punctuation">(</span>max_tries<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> delay<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;é‡è¯•è£…é¥°å™¨&quot;&quot;&quot;</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token decorator annotation punctuation">@wraps</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">for</span> attempt <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>max_tries<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">                <span class="token keyword">try</span><span class="token punctuation">:</span></span>
<span class="line">                    <span class="token keyword">return</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span></span>
<span class="line">                <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span></span>
<span class="line">                    <span class="token keyword">if</span> attempt <span class="token operator">==</span> max_tries <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span></span>
<span class="line">                        <span class="token keyword">raise</span></span>
<span class="line">                    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;ç¬¬ </span><span class="token interpolation"><span class="token punctuation">{</span>attempt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string"> æ¬¡å°è¯•å¤±è´¥ï¼Œ</span><span class="token interpolation"><span class="token punctuation">{</span>delay<span class="token punctuation">}</span></span><span class="token string">ç§’åé‡è¯•...&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">                    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>delay<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> wrapper</span>
<span class="line">    <span class="token keyword">return</span> decorator</span>
<span class="line"></span>
<span class="line"><span class="token decorator annotation punctuation">@retry</span><span class="token punctuation">(</span>max_tries<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> delay<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">unstable_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">import</span> random</span>
<span class="line">    <span class="token keyword">if</span> random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.7</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">&#39;éšæœºå¤±è´¥&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token string">&#39;æˆåŠŸ&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“-ç»ƒä¹ é¢˜" tabindex="-1"><a class="header-anchor" href="#ğŸ“-ç»ƒä¹ é¢˜"><span>ğŸ“ ç»ƒä¹ é¢˜</span></a></h2><ol><li>åˆ›å»ºä¸€ä¸ªé€Ÿç‡é™åˆ¶è£…é¥°å™¨</li><li>å®ç°ä¸€ä¸ªå‚æ•°ç±»å‹æ£€æŸ¥è£…é¥°å™¨</li><li>ç¼–å†™ä¸€ä¸ªå¼‚å¸¸å¤„ç†è£…é¥°å™¨</li></ol><hr>`,41)),s("p",null,[n[1]||(n[1]=s("strong",null,"ä¸‹ä¸€èŠ‚ï¼š",-1)),n[2]||(n[2]=a()),o(p,{to:"/tutorials/python-ai/python/%E7%AC%AC03%E7%AB%A0-%E8%BF%9B%E9%98%B6%E7%BC%96%E7%A8%8B/04-%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8.html"},{default:c(()=>[...n[0]||(n[0]=[a("ä¸Šä¸‹æ–‡ç®¡ç†å™¨",-1)])]),_:1})])])}const m=e(r,[["render",k]]),b=JSON.parse('{"path":"/tutorials/python-ai/python/di03zhang-jinjiebiancheng/03-zhuangshiqi.html","title":"è£…é¥°å™¨","lang":"zh-CN","frontmatter":{"title":"è£…é¥°å™¨"},"headers":[{"level":2,"title":"ğŸ“š å­¦ä¹ ç›®æ ‡","slug":"ğŸ“š-å­¦ä¹ ç›®æ ‡","link":"#ğŸ“š-å­¦ä¹ ç›®æ ‡","children":[]},{"level":2,"title":"1. è£…é¥°å™¨åŸºç¡€","slug":"_1-è£…é¥°å™¨åŸºç¡€","link":"#_1-è£…é¥°å™¨åŸºç¡€","children":[{"level":3,"title":"1.1 ä»€ä¹ˆæ˜¯è£…é¥°å™¨","slug":"_1-1-ä»€ä¹ˆæ˜¯è£…é¥°å™¨","link":"#_1-1-ä»€ä¹ˆæ˜¯è£…é¥°å™¨","children":[]},{"level":3,"title":"1.2 è£…é¥°å™¨åŸç†","slug":"_1-2-è£…é¥°å™¨åŸç†","link":"#_1-2-è£…é¥°å™¨åŸç†","children":[]}]},{"level":2,"title":"2. å¸¸ç”¨è£…é¥°å™¨æ¨¡å¼","slug":"_2-å¸¸ç”¨è£…é¥°å™¨æ¨¡å¼","link":"#_2-å¸¸ç”¨è£…é¥°å™¨æ¨¡å¼","children":[{"level":3,"title":"2.1 æ—¥å¿—è£…é¥°å™¨","slug":"_2-1-æ—¥å¿—è£…é¥°å™¨","link":"#_2-1-æ—¥å¿—è£…é¥°å™¨","children":[]},{"level":3,"title":"2.2 ç¼“å­˜è£…é¥°å™¨","slug":"_2-2-ç¼“å­˜è£…é¥°å™¨","link":"#_2-2-ç¼“å­˜è£…é¥°å™¨","children":[]},{"level":3,"title":"2.3 éªŒè¯è£…é¥°å™¨","slug":"_2-3-éªŒè¯è£…é¥°å™¨","link":"#_2-3-éªŒè¯è£…é¥°å™¨","children":[]}]},{"level":2,"title":"3. å¸¦å‚æ•°çš„è£…é¥°å™¨","slug":"_3-å¸¦å‚æ•°çš„è£…é¥°å™¨","link":"#_3-å¸¦å‚æ•°çš„è£…é¥°å™¨","children":[{"level":3,"title":"3.1 åŸºæœ¬è¯­æ³•","slug":"_3-1-åŸºæœ¬è¯­æ³•","link":"#_3-1-åŸºæœ¬è¯­æ³•","children":[]},{"level":3,"title":"3.2 æƒé™æ£€æŸ¥è£…é¥°å™¨","slug":"_3-2-æƒé™æ£€æŸ¥è£…é¥°å™¨","link":"#_3-2-æƒé™æ£€æŸ¥è£…é¥°å™¨","children":[]}]},{"level":2,"title":"4. ç±»è£…é¥°å™¨","slug":"_4-ç±»è£…é¥°å™¨","link":"#_4-ç±»è£…é¥°å™¨","children":[{"level":3,"title":"4.1 ä½¿ç”¨ç±»ä½œä¸ºè£…é¥°å™¨","slug":"_4-1-ä½¿ç”¨ç±»ä½œä¸ºè£…é¥°å™¨","link":"#_4-1-ä½¿ç”¨ç±»ä½œä¸ºè£…é¥°å™¨","children":[]},{"level":3,"title":"4.2 è£…é¥°ç±»","slug":"_4-2-è£…é¥°ç±»","link":"#_4-2-è£…é¥°ç±»","children":[]}]},{"level":2,"title":"5. functools æ¨¡å—","slug":"_5-functools-æ¨¡å—","link":"#_5-functools-æ¨¡å—","children":[{"level":3,"title":"5.1 wraps è£…é¥°å™¨","slug":"_5-1-wraps-è£…é¥°å™¨","link":"#_5-1-wraps-è£…é¥°å™¨","children":[]},{"level":3,"title":"5.2 lru_cache ç¼“å­˜","slug":"_5-2-lru-cache-ç¼“å­˜","link":"#_5-2-lru-cache-ç¼“å­˜","children":[]}]},{"level":2,"title":"6. å¤šä¸ªè£…é¥°å™¨","slug":"_6-å¤šä¸ªè£…é¥°å™¨","link":"#_6-å¤šä¸ªè£…é¥°å™¨","children":[]},{"level":2,"title":"7. å®æˆ˜æ¡ˆä¾‹","slug":"_7-å®æˆ˜æ¡ˆä¾‹","link":"#_7-å®æˆ˜æ¡ˆä¾‹","children":[{"level":3,"title":"æ¡ˆä¾‹1ï¼šæ€§èƒ½ç›‘æ§","slug":"æ¡ˆä¾‹1-æ€§èƒ½ç›‘æ§","link":"#æ¡ˆä¾‹1-æ€§èƒ½ç›‘æ§","children":[]},{"level":3,"title":"æ¡ˆä¾‹2ï¼šé‡è¯•æœºåˆ¶","slug":"æ¡ˆä¾‹2-é‡è¯•æœºåˆ¶","link":"#æ¡ˆä¾‹2-é‡è¯•æœºåˆ¶","children":[]}]},{"level":2,"title":"ğŸ“ ç»ƒä¹ é¢˜","slug":"ğŸ“-ç»ƒä¹ é¢˜","link":"#ğŸ“-ç»ƒä¹ é¢˜","children":[]}],"git":{"createdTime":1765249786000,"updatedTime":1765249786000,"contributors":[{"name":"CambridgeFoldingKnife","email":"3144253125@qq.com","commits":1}]},"filePathRelative":"tutorials/python-ai/python/ç¬¬03ç« -è¿›é˜¶ç¼–ç¨‹/03-è£…é¥°å™¨.md"}');export{m as comp,b as data};
