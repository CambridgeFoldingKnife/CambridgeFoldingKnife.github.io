import{_ as i,c,d as o,e as s,f as a,b as p,w as u,r as t,o as r}from"./app-DyGs7pMe.js";const d={},k={href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/uiability-overview-0000001820999489-V5",target:"_blank",rel:"noopener noreferrer"};function v(m,n){const e=t("ExternalLinkIcon"),l=t("RouteLink");return r(),c("div",null,[n[4]||(n[4]=o(`<h1 id="uiability-å¢å¼º" tabindex="-1"><a class="header-anchor" href="#uiability-å¢å¼º"><span>UIAbility å¢å¼º</span></a></h1><blockquote><p>HarmonyOS åº”ç”¨çš„åŸºç¡€èƒ½åŠ›å•å…ƒ</p></blockquote><h2 id="ğŸ¯-uiability-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#ğŸ¯-uiability-æ¦‚è¿°"><span>ğŸ¯ UIAbility æ¦‚è¿°</span></a></h2><h3 id="ä»€ä¹ˆæ˜¯-uiability" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-uiability"><span>ä»€ä¹ˆæ˜¯ UIAbility</span></a></h3><p>UIAbility æ˜¯åŒ…å«ç”¨æˆ·ç•Œé¢çš„åº”ç”¨ç»„ä»¶ï¼Œä¸ºç”¨æˆ·æä¾›å¯äº¤äº’çš„ç•Œé¢ã€‚</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">åº”ç”¨ç»„æˆ</span>
<span class="line">â”œâ”€ UIAbilityï¼ˆç”¨æˆ·ç•Œé¢ï¼‰</span>
<span class="line">â”‚   â”œâ”€ ä¸»ç•Œé¢</span>
<span class="line">â”‚   â”œâ”€ è¯¦æƒ…é¡µé¢</span>
<span class="line">â”‚   â””â”€ è®¾ç½®é¡µé¢</span>
<span class="line">â””â”€ ExtensionAbilityï¼ˆæ— ç•Œé¢æ‰©å±•ï¼‰</span>
<span class="line">    â”œâ”€ æœåŠ¡å¡ç‰‡</span>
<span class="line">    â””â”€ åå°æœåŠ¡</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“-åˆ›å»º-uiability" tabindex="-1"><a class="header-anchor" href="#ğŸ“-åˆ›å»º-uiability"><span>ğŸ“ åˆ›å»º UIAbility</span></a></h2><h3 id="åŸºç¡€ç»“æ„" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€ç»“æ„"><span>åŸºç¡€ç»“æ„</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> UIAbility <span class="token keyword">from</span> <span class="token string">&#39;@ohos.app.ability.UIAbility&#39;</span></span>
<span class="line"><span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">&#39;@ohos.window&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">EntryAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// åˆ›å»ºæ—¶è°ƒç”¨</span></span>
<span class="line">  <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;UIAbility onCreate&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// é”€æ¯æ—¶è°ƒç”¨</span></span>
<span class="line">  <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;UIAbility onDestroy&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// å‰å°æ—¶è°ƒç”¨</span></span>
<span class="line">  <span class="token function">onForeground</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;UIAbility onForeground&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// åå°æ—¶è°ƒç”¨</span></span>
<span class="line">  <span class="token function">onBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;UIAbility onBackground&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// çª—å£é˜¶æ®µ</span></span>
<span class="line">  <span class="token function">onWindowStageCreate</span><span class="token punctuation">(</span>windowStage<span class="token operator">:</span> window<span class="token punctuation">.</span>WindowStage<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    windowStage<span class="token punctuation">.</span><span class="token function">loadContent</span><span class="token punctuation">(</span><span class="token string">&#39;pages/Index&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;åŠ è½½é¡µé¢å¤±è´¥&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;åŠ è½½é¡µé¢æˆåŠŸ&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">onWindowStageDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;WindowStage é”€æ¯&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸš€-å¯åŠ¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ğŸš€-å¯åŠ¨æ¨¡å¼"><span>ğŸš€ å¯åŠ¨æ¨¡å¼</span></a></h2><h3 id="_1-singleton-å•å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_1-singleton-å•å®ä¾‹"><span>1. singletonï¼ˆå•å®ä¾‹ï¼‰</span></a></h3><div class="language-json5 line-numbers-mode" data-highlighter="prismjs" data-ext="json5" data-title="json5"><pre><code><span class="line"><span class="token comment">// module.json5</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;abilities&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EntryAbility&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;launchType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;singleton&quot;</span>  <span class="token comment">// å•å®ä¾‹æ¨¡å¼</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªå®ä¾‹</li><li>å†æ¬¡å¯åŠ¨ä¼šå¤ç”¨å·²æœ‰å®ä¾‹</li><li>é€‚ç”¨åœºæ™¯ï¼šä¸»é¡µã€è®¾ç½®é¡µ</li></ul><h3 id="_2-multiton-å¤šå®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_2-multiton-å¤šå®ä¾‹"><span>2. multitonï¼ˆå¤šå®ä¾‹ï¼‰</span></a></h3><div class="language-json5 line-numbers-mode" data-highlighter="prismjs" data-ext="json5" data-title="json5"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;abilities&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DetailAbility&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;launchType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;multiton&quot;</span>  <span class="token comment">// å¤šå®ä¾‹æ¨¡å¼</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>æ¯æ¬¡å¯åŠ¨åˆ›å»ºæ–°å®ä¾‹</li><li>é€‚ç”¨åœºæ™¯ï¼šè¯¦æƒ…é¡µã€ç¼–è¾‘é¡µ</li></ul><h3 id="_3-specified-æŒ‡å®šå®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_3-specified-æŒ‡å®šå®ä¾‹"><span>3. specifiedï¼ˆæŒ‡å®šå®ä¾‹ï¼‰</span></a></h3><div class="language-json5 line-numbers-mode" data-highlighter="prismjs" data-ext="json5" data-title="json5"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;abilities&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DocumentAbility&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;launchType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;specified&quot;</span>  <span class="token comment">// æŒ‡å®šå®ä¾‹æ¨¡å¼</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>å¯ä»¥è‡ªå®šä¹‰å®ä¾‹åˆ›å»ºé€»è¾‘</li><li>é€‚ç”¨åœºæ™¯ï¼šæ–‡æ¡£ç¼–è¾‘å™¨</li></ul><h2 id="ğŸ”—-uiability-å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#ğŸ”—-uiability-å¯åŠ¨"><span>ğŸ”— UIAbility å¯åŠ¨</span></a></h2><h3 id="åŒåº”ç”¨å†…å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#åŒåº”ç”¨å†…å¯åŠ¨"><span>åŒåº”ç”¨å†…å¯åŠ¨</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> common <span class="token keyword">from</span> <span class="token string">&#39;@ohos.app.ability.common&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span></span>
<span class="line">struct Index <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> context <span class="token operator">=</span> <span class="token function">getContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token keyword">as</span> common<span class="token punctuation">.</span>UIAbilityContext</span>
<span class="line">  </span>
<span class="line">  <span class="token function">startAbility</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> want <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      deviceId<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// é»˜è®¤æœ¬è®¾å¤‡</span></span>
<span class="line">      bundleName<span class="token operator">:</span> <span class="token string">&#39;com.example.myapp&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      abilityName<span class="token operator">:</span> <span class="token string">&#39;DetailAbility&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      parameters<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        id<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span></span>
<span class="line">        title<span class="token operator">:</span> <span class="token string">&#39;è¯¦æƒ…é¡µ&#39;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">startAbility</span><span class="token punctuation">(</span>want<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å¯åŠ¨æˆåŠŸ&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;å¯åŠ¨å¤±è´¥:&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">&#39;è·³è½¬åˆ°è¯¦æƒ…&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">startAbility</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è·¨åº”ç”¨å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#è·¨åº”ç”¨å¯åŠ¨"><span>è·¨åº”ç”¨å¯åŠ¨</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token function">startOtherApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> want <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    bundleName<span class="token operator">:</span> <span class="token string">&#39;com.other.app&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// å…¶ä»–åº”ç”¨åŒ…å</span></span>
<span class="line">    abilityName<span class="token operator">:</span> <span class="token string">&#39;MainAbility&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    parameters<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      data<span class="token operator">:</span> <span class="token string">&#39;shared data&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">startAbility</span><span class="token punctuation">(</span>want<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å¯åŠ¨å…¶ä»–åº”ç”¨æˆåŠŸ&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;å¯åŠ¨å¤±è´¥:&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¸¦ç»“æœå¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#å¸¦ç»“æœå¯åŠ¨"><span>å¸¦ç»“æœå¯åŠ¨</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">async</span> <span class="token function">startAbilityForResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> want <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    bundleName<span class="token operator">:</span> <span class="token string">&#39;com.example.myapp&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    abilityName<span class="token operator">:</span> <span class="token string">&#39;SelectAbility&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    parameters<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      type<span class="token operator">:</span> <span class="token string">&#39;image&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">startAbilityForResult</span><span class="token punctuation">(</span>want<span class="token punctuation">)</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è¿”å›ç»“æœ:&#39;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>resultCode<span class="token punctuation">,</span> result<span class="token punctuation">.</span>want<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>resultCode <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> selectedImage <span class="token operator">=</span> result<span class="token punctuation">.</span>want<span class="token operator">?.</span>parameters<span class="token operator">?.</span>image</span>
<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;é€‰æ‹©çš„å›¾ç‰‡:&#39;</span><span class="token punctuation">,</span> selectedImage<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;å¯åŠ¨å¤±è´¥:&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è¿”å›ç»“æœ" tabindex="-1"><a class="header-anchor" href="#è¿”å›ç»“æœ"><span>è¿”å›ç»“æœ</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// SelectAbility.ets</span></span>
<span class="line"><span class="token keyword">import</span> UIAbility <span class="token keyword">from</span> <span class="token string">&#39;@ohos.app.ability.UIAbility&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">SelectAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">onWindowStageCreate</span><span class="token punctuation">(</span>windowStage<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    windowStage<span class="token punctuation">.</span><span class="token function">loadContent</span><span class="token punctuation">(</span><span class="token string">&#39;pages/Select&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// é€‰æ‹©å®Œæˆåè¿”å›</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// è¿”å›ç»“æœ</span></span>
<span class="line">  <span class="token function">returnResult</span><span class="token punctuation">(</span>image<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> abilityResult <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      resultCode<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      want<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        parameters<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          image<span class="token operator">:</span> image</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">terminateSelfWithResult</span><span class="token punctuation">(</span>abilityResult<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è¿”å›ç»“æœæˆåŠŸ&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“¦-æ•°æ®ä¼ é€’" tabindex="-1"><a class="header-anchor" href="#ğŸ“¦-æ•°æ®ä¼ é€’"><span>ğŸ“¦ æ•°æ®ä¼ é€’</span></a></h2><h3 id="é€šè¿‡-want-ä¼ é€’" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡-want-ä¼ é€’"><span>é€šè¿‡ Want ä¼ é€’</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// ä¼ é€’ç®€å•æ•°æ®</span></span>
<span class="line"><span class="token keyword">const</span> want <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  bundleName<span class="token operator">:</span> <span class="token string">&#39;com.example.myapp&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  abilityName<span class="token operator">:</span> <span class="token string">&#39;DetailAbility&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  parameters<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    id<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span></span>
<span class="line">    title<span class="token operator">:</span> <span class="token string">&#39;å•†å“è¯¦æƒ…&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    price<span class="token operator">:</span> <span class="token number">99.99</span><span class="token punctuation">,</span></span>
<span class="line">    tags<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;çƒ­é”€&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ–°å“&#39;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">startAbility</span><span class="token punctuation">(</span>want<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ¥æ”¶æ•°æ®</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">DetailAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> id <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>id</span>
<span class="line">    <span class="token keyword">const</span> title <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>title</span>
<span class="line">    <span class="token keyword">const</span> price <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>price</span>
<span class="line">    <span class="token keyword">const</span> tags <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>tags</span>
<span class="line">    </span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ¥æ”¶åˆ°:&#39;</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> title<span class="token punctuation">,</span> price<span class="token punctuation">,</span> tags<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é€šè¿‡-appstorage-å…±äº«" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡-appstorage-å…±äº«"><span>é€šè¿‡ AppStorage å…±äº«</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// é¡µé¢ A - è®¾ç½®æ•°æ®</span></span>
<span class="line">AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;sharedData&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  user<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;Alice&#39;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">25</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  settings<span class="token operator">:</span> <span class="token punctuation">{</span> theme<span class="token operator">:</span> <span class="token string">&#39;dark&#39;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// é¡µé¢ B - è¯»å–æ•°æ®</span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span></span>
<span class="line">struct PageB <span class="token punctuation">{</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">StorageLink</span></span><span class="token punctuation">(</span><span class="token string">&#39;sharedData&#39;</span><span class="token punctuation">)</span> sharedData<span class="token operator">:</span> <span class="token builtin">any</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ç”¨æˆ·: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>sharedData<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ä¸»é¢˜: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>sharedData<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>theme<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ¯-å®æˆ˜æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#ğŸ¯-å®æˆ˜æ¡ˆä¾‹"><span>ğŸ¯ å®æˆ˜æ¡ˆä¾‹</span></a></h2><h3 id="å•†å“è¯¦æƒ…é¡µ" tabindex="-1"><a class="header-anchor" href="#å•†å“è¯¦æƒ…é¡µ"><span>å•†å“è¯¦æƒ…é¡µ</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// å•†å“åˆ—è¡¨é¡µ</span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span></span>
<span class="line">struct ProductList <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> context <span class="token operator">=</span> <span class="token function">getContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token keyword">as</span> common<span class="token punctuation">.</span>UIAbilityContext</span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> products<span class="token operator">:</span> Product<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">openDetail</span><span class="token punctuation">(</span>product<span class="token operator">:</span> Product<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> want <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      bundleName<span class="token operator">:</span> <span class="token string">&#39;com.example.shop&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      abilityName<span class="token operator">:</span> <span class="token string">&#39;ProductDetailAbility&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      parameters<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        productId<span class="token operator">:</span> product<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span>
<span class="line">        productName<span class="token operator">:</span> product<span class="token punctuation">.</span>name<span class="token punctuation">,</span></span>
<span class="line">        productPrice<span class="token operator">:</span> product<span class="token punctuation">.</span>price</span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">startAbility</span><span class="token punctuation">(</span>want<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">ForEach</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>products<span class="token punctuation">,</span> <span class="token punctuation">(</span>product<span class="token operator">:</span> Product<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">ListItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">Text</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line">              <span class="token punctuation">.</span><span class="token function">layoutWeight</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Â¥</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>product<span class="token punctuation">.</span>price<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">&#39;æŸ¥çœ‹&#39;</span><span class="token punctuation">)</span></span>
<span class="line">              <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">openDetail</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span></span>
<span class="line">              <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">          <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å•†å“è¯¦æƒ… Ability</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ProductDetailAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> productId<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>productId <span class="token operator">=</span> want<span class="token punctuation">.</span>parameters<span class="token operator">?.</span>productId <span class="token operator">||</span> <span class="token number">0</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ä¿å­˜åˆ°å…¨å±€å­˜å‚¨</span></span>
<span class="line">    AppStorage<span class="token punctuation">.</span><span class="token function">SetOrCreate</span><span class="token punctuation">(</span><span class="token string">&#39;currentProductId&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>productId<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">onWindowStageCreate</span><span class="token punctuation">(</span>windowStage<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    windowStage<span class="token punctuation">.</span><span class="token function">loadContent</span><span class="token punctuation">(</span><span class="token string">&#39;pages/ProductDetail&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å•†å“è¯¦æƒ…é¡µé¢</span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span></span>
<span class="line">struct ProductDetail <span class="token punctuation">{</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">StorageLink</span></span><span class="token punctuation">(</span><span class="token string">&#39;currentProductId&#39;</span><span class="token punctuation">)</span> productId<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> product<span class="token operator">:</span> Product <span class="token operator">=</span> <span class="token keyword">null</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">aboutToAppear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// æ ¹æ® ID åŠ è½½å•†å“è¯¦æƒ…</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>product <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadProduct</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>productId<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">Image</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>product<span class="token operator">?.</span>image<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">&#39;100%&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>product<span class="token operator">?.</span>name<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">fontWeight</span><span class="token punctuation">(</span>FontWeight<span class="token punctuation">.</span>Bold<span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Â¥</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token keyword">this</span><span class="token punctuation">.</span>product<span class="token operator">?.</span>price<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Red<span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>product<span class="token operator">?.</span>description<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> top<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ’¡-æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#ğŸ’¡-æœ€ä½³å®è·µ"><span>ğŸ’¡ æœ€ä½³å®è·µ</span></a></h2><h3 id="_1-åˆç†é€‰æ‹©å¯åŠ¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_1-åˆç†é€‰æ‹©å¯åŠ¨æ¨¡å¼"><span>1. åˆç†é€‰æ‹©å¯åŠ¨æ¨¡å¼</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// âœ… ä¸»é¡µä½¿ç”¨ singleton</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MainAbility&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string-property property">&quot;launchType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;singleton&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// âœ… è¯¦æƒ…é¡µä½¿ç”¨ multiton</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DetailAbility&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string-property property">&quot;launchType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;multiton&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å¤„ç†å¯åŠ¨é”™è¯¯" tabindex="-1"><a class="header-anchor" href="#_2-å¤„ç†å¯åŠ¨é”™è¯¯"><span>2. å¤„ç†å¯åŠ¨é”™è¯¯</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">startAbility</span><span class="token punctuation">(</span>want<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">16000001</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;Ability ä¸å­˜åœ¨&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">16000002</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;å‚æ•°é”™è¯¯&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-åŠæ—¶æ¸…ç†èµ„æº" tabindex="-1"><a class="header-anchor" href="#_3-åŠæ—¶æ¸…ç†èµ„æº"><span>3. åŠæ—¶æ¸…ç†èµ„æº</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// æ¸…ç†å®šæ—¶å™¨</span></span>
<span class="line">  <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// æ¸…ç†ç›‘å¬å™¨</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// é‡Šæ”¾èµ„æº</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">releaseResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“š-å‚è€ƒèµ„æº" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-å‚è€ƒèµ„æº"><span>ğŸ“š å‚è€ƒèµ„æº</span></a></h2>`,47)),s("ul",null,[s("li",null,[s("a",k,[n[0]||(n[0]=a("UIAbility å®˜æ–¹æ–‡æ¡£",-1)),p(e)])])]),n[5]||(n[5]=s("hr",null,null,-1)),s("p",null,[n[2]||(n[2]=s("strong",null,"ä¸‹ä¸€èŠ‚",-1)),n[3]||(n[3]=a(" â†’ ",-1)),p(l,{to:"/tutorials/harmonyos-dev/05-ability-framework/02-ExtensionAbility%E6%96%B0%E7%B1%BB%E5%9E%8B.html"},{default:u(()=>[...n[1]||(n[1]=[a("ExtensionAbility æ–°ç±»å‹",-1)])]),_:1})])])}const h=i(d,[["render",v]]),g=JSON.parse('{"path":"/tutorials/harmonyos-dev/05-ability-framework/01-UIAbilityzengqiang.html","title":"UIAbility å¢å¼º","lang":"zh-CN","frontmatter":{"title":"UIAbility å¢å¼º","date":"2025-01-22T00:00:00.000Z"},"headers":[{"level":2,"title":"ğŸ¯ UIAbility æ¦‚è¿°","slug":"ğŸ¯-uiability-æ¦‚è¿°","link":"#ğŸ¯-uiability-æ¦‚è¿°","children":[{"level":3,"title":"ä»€ä¹ˆæ˜¯ UIAbility","slug":"ä»€ä¹ˆæ˜¯-uiability","link":"#ä»€ä¹ˆæ˜¯-uiability","children":[]}]},{"level":2,"title":"ğŸ“ åˆ›å»º UIAbility","slug":"ğŸ“-åˆ›å»º-uiability","link":"#ğŸ“-åˆ›å»º-uiability","children":[{"level":3,"title":"åŸºç¡€ç»“æ„","slug":"åŸºç¡€ç»“æ„","link":"#åŸºç¡€ç»“æ„","children":[]}]},{"level":2,"title":"ğŸš€ å¯åŠ¨æ¨¡å¼","slug":"ğŸš€-å¯åŠ¨æ¨¡å¼","link":"#ğŸš€-å¯åŠ¨æ¨¡å¼","children":[{"level":3,"title":"1. singletonï¼ˆå•å®ä¾‹ï¼‰","slug":"_1-singleton-å•å®ä¾‹","link":"#_1-singleton-å•å®ä¾‹","children":[]},{"level":3,"title":"2. multitonï¼ˆå¤šå®ä¾‹ï¼‰","slug":"_2-multiton-å¤šå®ä¾‹","link":"#_2-multiton-å¤šå®ä¾‹","children":[]},{"level":3,"title":"3. specifiedï¼ˆæŒ‡å®šå®ä¾‹ï¼‰","slug":"_3-specified-æŒ‡å®šå®ä¾‹","link":"#_3-specified-æŒ‡å®šå®ä¾‹","children":[]}]},{"level":2,"title":"ğŸ”— UIAbility å¯åŠ¨","slug":"ğŸ”—-uiability-å¯åŠ¨","link":"#ğŸ”—-uiability-å¯åŠ¨","children":[{"level":3,"title":"åŒåº”ç”¨å†…å¯åŠ¨","slug":"åŒåº”ç”¨å†…å¯åŠ¨","link":"#åŒåº”ç”¨å†…å¯åŠ¨","children":[]},{"level":3,"title":"è·¨åº”ç”¨å¯åŠ¨","slug":"è·¨åº”ç”¨å¯åŠ¨","link":"#è·¨åº”ç”¨å¯åŠ¨","children":[]},{"level":3,"title":"å¸¦ç»“æœå¯åŠ¨","slug":"å¸¦ç»“æœå¯åŠ¨","link":"#å¸¦ç»“æœå¯åŠ¨","children":[]},{"level":3,"title":"è¿”å›ç»“æœ","slug":"è¿”å›ç»“æœ","link":"#è¿”å›ç»“æœ","children":[]}]},{"level":2,"title":"ğŸ“¦ æ•°æ®ä¼ é€’","slug":"ğŸ“¦-æ•°æ®ä¼ é€’","link":"#ğŸ“¦-æ•°æ®ä¼ é€’","children":[{"level":3,"title":"é€šè¿‡ Want ä¼ é€’","slug":"é€šè¿‡-want-ä¼ é€’","link":"#é€šè¿‡-want-ä¼ é€’","children":[]},{"level":3,"title":"é€šè¿‡ AppStorage å…±äº«","slug":"é€šè¿‡-appstorage-å…±äº«","link":"#é€šè¿‡-appstorage-å…±äº«","children":[]}]},{"level":2,"title":"ğŸ¯ å®æˆ˜æ¡ˆä¾‹","slug":"ğŸ¯-å®æˆ˜æ¡ˆä¾‹","link":"#ğŸ¯-å®æˆ˜æ¡ˆä¾‹","children":[{"level":3,"title":"å•†å“è¯¦æƒ…é¡µ","slug":"å•†å“è¯¦æƒ…é¡µ","link":"#å•†å“è¯¦æƒ…é¡µ","children":[]}]},{"level":2,"title":"ğŸ’¡ æœ€ä½³å®è·µ","slug":"ğŸ’¡-æœ€ä½³å®è·µ","link":"#ğŸ’¡-æœ€ä½³å®è·µ","children":[{"level":3,"title":"1. åˆç†é€‰æ‹©å¯åŠ¨æ¨¡å¼","slug":"_1-åˆç†é€‰æ‹©å¯åŠ¨æ¨¡å¼","link":"#_1-åˆç†é€‰æ‹©å¯åŠ¨æ¨¡å¼","children":[]},{"level":3,"title":"2. å¤„ç†å¯åŠ¨é”™è¯¯","slug":"_2-å¤„ç†å¯åŠ¨é”™è¯¯","link":"#_2-å¤„ç†å¯åŠ¨é”™è¯¯","children":[]},{"level":3,"title":"3. åŠæ—¶æ¸…ç†èµ„æº","slug":"_3-åŠæ—¶æ¸…ç†èµ„æº","link":"#_3-åŠæ—¶æ¸…ç†èµ„æº","children":[]}]},{"level":2,"title":"ğŸ“š å‚è€ƒèµ„æº","slug":"ğŸ“š-å‚è€ƒèµ„æº","link":"#ğŸ“š-å‚è€ƒèµ„æº","children":[]}],"git":{"createdTime":1765250065000,"updatedTime":1765250065000,"contributors":[{"name":"CambridgeFoldingKnife","email":"3144253125@qq.com","commits":1}]},"filePathRelative":"tutorials/harmonyos-dev/05-ability-framework/01-UIAbilityå¢å¼º.md"}');export{h as comp,g as data};
